var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t){return null==t?"":t}function c(t,e,n){return t.set(n),e}function d(e){return e&&i(e.destroy)?e.destroy:t}const u="undefined"!=typeof window;let f=u?()=>window.performance.now():()=>Date.now(),g=u?t=>requestAnimationFrame(t):t;const m=new Set;function p(t){m.forEach((e=>{e.c(t)||(m.delete(e),e.f())})),0!==m.size&&g(p)}function h(t,e){t.appendChild(e)}function y(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function v(t){const e=x("style");return function(t,e){h(t.head||t,e)}(y(t),e),e}function b(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function E(t){return document.createTextNode(t)}function D(){return E(" ")}function T(){return E("")}function A(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function L(t,e,n){t.classList[n?"add":"remove"](e)}const C=new Set;let k,I=0;function M(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),I-=r,I||g((()=>{I||(C.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),C.clear())})))}function W(t){k=t}const P=[],F=[],N=[],j=[],z=Promise.resolve();let H=!1;function B(t){N.push(t)}let R=!1;const X=new Set;function q(){if(!R){R=!0;do{for(let t=0;t<P.length;t+=1){const e=P[t];W(e),Y(e.$$)}for(W(null),P.length=0;F.length;)F.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];X.has(e)||(X.add(e),e())}N.length=0}while(P.length);for(;j.length;)j.pop()();H=!1,R=!1,X.clear()}}function Y(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}let V;function Z(t,e,n){t.dispatchEvent(function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(`${e?"intro":"outro"}${n}`))}const U=new Set;let G;function J(){G={r:0,c:[],p:G}}function K(){G.r||r(G.c),G=G.p}function Q(t,e){t&&t.i&&(U.delete(t),t.i(e))}function tt(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),G.c.push((()=>{U.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const et={duration:0};function nt(n,o,s){let a,l=o(n,s),c=!0;const d=G;function u(){const{delay:o=0,duration:i=300,easing:s=e,tick:u=t,css:h}=l||et;h&&(a=function(t,e,n,o,r,i,s,a=0){const l=16.666/o;let c="{\n";for(let t=0;t<=1;t+=l){const o=e+(n-e)*i(t);c+=100*t+`%{${s(o,1-o)}}\n`}const d=c+`100% {${s(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(d)}_${a}`,f=y(t);C.add(f);const g=f.__svelte_stylesheet||(f.__svelte_stylesheet=v(t).sheet),m=f.__svelte_rules||(f.__svelte_rules={});m[u]||(m[u]=!0,g.insertRule(`@keyframes ${u} ${d}`,g.cssRules.length));const p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${u} ${o}ms linear ${r}ms 1 both`,I+=1,u}(n,1,0,i,o,s,h));const b=f()+o,w=b+i;B((()=>Z(n,!1,"start"))),function(t){let e;0===m.size&&g(p),new Promise((n=>{m.add(e={c:t,f:n})}))}((t=>{if(c){if(t>=w)return u(0,1),Z(n,!1,"end"),--d.r||r(d.c),!1;if(t>=b){const e=s((t-b)/i);u(1-e,e)}}return c}))}return d.r+=1,i(l)?(V||(V=Promise.resolve(),V.then((()=>{V=null}))),V).then((()=>{l=l(),u()})):u(),{end(t){t&&l.tick&&l.tick(1,0),c&&(a&&M(n,a),c=!1)}}}function ot(t,e){tt(t,1,1,(()=>{e.delete(t.key)}))}function rt(t,e,n,o,r,i,s,a,l,c,d,u){let f=t.length,g=i.length,m=f;const p={};for(;m--;)p[t[m].key]=m;const h=[],y=new Map,v=new Map;for(m=g;m--;){const t=u(r,i,m),a=n(t);let l=s.get(a);l?o&&l.p(t,e):(l=c(a,t),l.c()),y.set(a,h[m]=l),a in p&&v.set(a,Math.abs(m-p[a]))}const b=new Set,w=new Set;function $(t){Q(t,1),t.m(a,d),s.set(t.key,t),d=t.first,g--}for(;f&&g;){const e=h[g-1],n=t[f-1],o=e.key,r=n.key;e===n?(d=e.first,f--,g--):y.has(r)?!s.has(o)||b.has(o)?$(e):w.has(r)?f--:v.get(o)>v.get(r)?(w.add(o),$(e)):(b.add(r),f--):(l(n,s),f--)}for(;f--;){const e=t[f];y.has(e.key)||l(e,s)}for(;g;)$(h[g-1]);return h}function it(t){t&&t.c()}function st(t,e,o,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:d}=t.$$;a&&a.m(e,o),s||B((()=>{const e=l.map(n).filter(i);c?c.push(...e):r(e),t.$$.on_mount=[]})),d.forEach(B)}function at(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){-1===t.$$.dirty[0]&&(P.push(t),H||(H=!0,z.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(e,n,i,s,a,l,c,d=[-1]){const u=k;W(e);const f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||u.$$.root};c&&c(f.root);let g=!1;if(f.ctx=i?i(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),g&&lt(e,t)),n})):[],f.update(),g=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(w)}else f.fragment&&f.fragment.c();n.intro&&Q(e.$$.fragment),st(e,n.target,n.anchor,n.customElement),q()}W(u)}class dt{$destroy(){at(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut=[];function ft(e,n=t){let o;const r=new Set;function i(t){if(s(e,t)&&(e=t,o)){const t=!ut.length;for(const t of r)t[1](),ut.push(t,e);if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,a=t){const l=[s,a];return r.add(l),1===r.size&&(o=n(i)||t),s(e),()=>{r.delete(l),0===r.size&&(o(),o=null)}}}}const gt=ft({title:"Player",health:100,maxHealth:100,abilityWindup:0,maxOrbs:7,gold:0,combo:0,effects:[]}),mt=ft([2,3,4,5,0]),pt=ft([]),ht=ft({title:"Enemy",health:100,maxHealth:100,damage:1,speed:2.5,abilityWindup:0,effects:[]}),yt=[{name:"Nothing!",icon:"-",damage:0,speed:0},{name:"Punch",icon:"P",damage:1,speed:2},{name:"Fire Bolt",icon:"F",damage:1,speed:2,orbs:["F"]},{name:"Kick",icon:"K",damage:2,speed:3,orbs:["P"]},{name:"Roundhouse",icon:"R",damage:3,speed:2,cost:{P:2}},{name:"Healing Flame",icon:"H",speed:5,damage:0,heal:8,cost:{F:2,P:1}},{name:"Splash",icon:"S",damage:0,speed:1,orbs:["W"]},{name:"Steam Blast",icon:"SB",damage:3,speed:1,cost:{W:2,F:1},orbs:["W"]},{name:"Ice Armor",icon:"IA",heal:5,speed:1,cost:{W:3}},{name:"Rock Toss",icon:"RT",damage:2,speed:5,orbs:["E","E"]},{name:"Stone Fist",icon:"SF",damage:4,speed:3,cost:{P:1,E:1},orbs:["P","P"]},{name:"Mud Slap",icon:"MS",damage:3,speed:2,cost:{W:1,E:1},orbs:["E","P"]},{name:"Landslide",icon:"LS",damage:20,speed:5,cost:{E:5}}].reduce(((t,e,n)=>(e.id=n,t[e.id]=e,t)),{}),vt={P:{title:"Physical",color:"#383838",icon:"âš«"},F:{title:"Flame",color:"#e81224",icon:"ðŸ”´"},W:{title:"Water",color:"#0078d7",icon:"ðŸ”µ"},E:{title:"Earth",color:"#8e562e",icon:"ðŸŸ¤"}};function bt(e){let n,o,r,i;return{c(){n=x("div"),o=E(e[1]),r=E(" / "),i=E(e[0]),O(n,"class","healthbar svelte-4tknbb")},m(t,e){b(t,n,e),h(n,o),h(n,r),h(n,i)},p(t,[e]){2&e&&S(o,t[1]),1&e&&S(i,t[0])},i:t,o:t,d(t){t&&w(n)}}}function wt(t,e,n){let{maxHealth:o}=e,{health:r}=e;return t.$$set=t=>{"maxHealth"in t&&n(0,o=t.maxHealth),"health"in t&&n(1,r=t.health)},[o,r]}class $t extends dt{constructor(t){super(),ct(this,t,wt,bt,s,{maxHealth:0,health:1})}}function xt(t){const e=t-1;return e*e*e+1}function Et(t){return Math.sin(t*Math.PI/2)}function Dt(t,{delay:e=0,duration:n=400,easing:o=xt,x:r=0,y:i=0,opacity:s=0}={}){const a=getComputedStyle(t),l=+a.opacity,c="none"===a.transform?"":a.transform,d=l*(1-s);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*r}px, ${(1-t)*i}px);\n\t\t\topacity: ${l-d*e}`}}function Tt(t){let e,n,o,r,i,s=t[0].text+"";return{c(){e=x("div"),n=E(s),O(e,"class",o="effect type-"+t[0].type+" svelte-1lsyiv5")},m(t,o){b(t,e,o),h(e,n),i=!0},p(r,[a]){t=r,(!i||1&a)&&s!==(s=t[0].text+"")&&S(n,s),(!i||1&a&&o!==(o="effect type-"+t[0].type+" svelte-1lsyiv5"))&&O(e,"class",o)},i(t){i||(r&&r.end(1),i=!0)},o(t){r=nt(e,Dt,{duration:1500,y:-50,opacity:0,easing:Et}),i=!1},d(t){t&&w(e),t&&r&&r.end()}}}function At(t,e,n){let{effect:o}=e;return t.$$set=t=>{"effect"in t&&n(0,o=t.effect)},[o]}class Ot extends dt{constructor(t){super(),ct(this,t,At,Tt,s,{effect:0})}}function St(t,e,n){const o=t.slice();return o[1]=e[n],o}function _t(t,e){let n,o,r;return o=new Ot({props:{effect:e[1]}}),{key:t,first:null,c(){n=T(),it(o.$$.fragment),this.first=n},m(t,e){b(t,n,e),st(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.effect=e[1]),o.$set(r)},i(t){r||(Q(o.$$.fragment,t),r=!0)},o(t){tt(o.$$.fragment,t),r=!1},d(t){t&&w(n),at(o,t)}}}function Lt(t){let e,n,o=[],r=new Map,i=t[0];const s=t=>`${t[1].type}_${t[1].start}_${t[1].text}`;for(let e=0;e<i.length;e+=1){let n=St(t,i,e),a=s(n);r.set(a,o[e]=_t(a,n))}return{c(){e=x("div");for(let t=0;t<o.length;t+=1)o[t].c();O(e,"class","effect-group svelte-1gbe0ii")},m(t,r){b(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){1&n&&(i=t[0],J(),o=rt(o,n,s,1,t,i,r,e,ot,_t,null,St),K())},i(t){if(!n){for(let t=0;t<i.length;t+=1)Q(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)tt(o[t]);n=!1},d(t){t&&w(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Ct(t,e,n){let{effects:o=[]}=e;return t.$$set=t=>{"effects"in t&&n(0,o=t.effects)},[o]}class kt extends dt{constructor(t){super(),ct(this,t,Ct,Lt,s,{effects:0})}}function It(t){let e,n,o,r,i,s,a,c,d,u,f,g=t[0].title+"";return n=new kt({props:{effects:t[0].effects}}),a=new $t({props:{health:t[0].health,maxHealth:t[0].maxHealth}}),{c(){e=x("div"),it(n.$$.fragment),o=D(),r=x("div"),i=E(g),s=D(),it(a.$$.fragment),c=D(),d=x("div"),O(r,"class","title svelte-14y5r3h"),O(d,"class","sprite svelte-14y5r3h"),O(e,"class",u=l("character side-"+t[1])+" svelte-14y5r3h")},m(t,l){b(t,e,l),st(n,e,null),h(e,o),h(e,r),h(r,i),h(e,s),st(a,e,null),h(e,c),h(e,d),f=!0},p(t,[o]){const r={};1&o&&(r.effects=t[0].effects),n.$set(r),(!f||1&o)&&g!==(g=t[0].title+"")&&S(i,g);const s={};1&o&&(s.health=t[0].health),1&o&&(s.maxHealth=t[0].maxHealth),a.$set(s),(!f||2&o&&u!==(u=l("character side-"+t[1])+" svelte-14y5r3h"))&&O(e,"class",u)},i(t){f||(Q(n.$$.fragment,t),Q(a.$$.fragment,t),f=!0)},o(t){tt(n.$$.fragment,t),tt(a.$$.fragment,t),f=!1},d(t){t&&w(e),at(n),at(a)}}}function Mt(t,e,n){let{character:o}=e,{side:r}=e;return t.$$set=t=>{"character"in t&&n(0,o=t.character),"side"in t&&n(1,r=t.side)},[o,r]}class Wt extends dt{constructor(t){super(),ct(this,t,Mt,It,s,{character:0,side:1})}}function Pt(t){let e,n,o,r,i;return n=new Wt({props:{character:t[0],side:"left"}}),r=new Wt({props:{character:t[1],side:"right"}}),{c(){e=x("div"),it(n.$$.fragment),o=D(),it(r.$$.fragment),O(e,"class","viewscreen svelte-1w8k5qv")},m(t,s){b(t,e,s),st(n,e,null),h(e,o),st(r,e,null),i=!0},p(t,[e]){const o={};1&e&&(o.character=t[0]),n.$set(o);const i={};2&e&&(i.character=t[1]),r.$set(i)},i(t){i||(Q(n.$$.fragment,t),Q(r.$$.fragment,t),i=!0)},o(t){tt(n.$$.fragment,t),tt(r.$$.fragment,t),i=!1},d(t){t&&w(e),at(n),at(r)}}}function Ft(t,e,n){let o,r;return a(t,gt,(t=>n(0,o=t))),a(t,ht,(t=>n(1,r=t))),[o,r]}class Nt extends dt{constructor(t){super(),ct(this,t,Ft,Pt,s,{})}}function jt(e){let n;return{c(){n=x("div"),O(n,"class","orb-slot svelte-1mjc8gs")},m(t,e){b(t,n,e)},p:t,d(t){t&&w(n)}}}function zt(t){let e,n,o;return{c(){e=x("div"),n=E(t[0]),O(e,"class","orb-slot svelte-1mjc8gs"),O(e,"title",o=vt[t[0]].title),_(e,"--orb-color",vt[t[0]].color)},m(t,o){b(t,e,o),h(e,n)},p(t,r){1&r&&S(n,t[0]),1&r&&o!==(o=vt[t[0]].title)&&O(e,"title",o),1&r&&_(e,"--orb-color",vt[t[0]].color)},d(t){t&&w(e)}}}function Ht(e){let n;function o(t,e){return t[0]?zt:jt}let r=o(e),i=r(e);return{c(){i.c(),n=T()},m(t,e){i.m(t,e),b(t,n,e)},p(t,[e]){r===(r=o(t))&&i?i.p(t,e):(i.d(1),i=r(t),i&&(i.c(),i.m(n.parentNode,n)))},i:t,o:t,d(t){i.d(t),t&&w(n)}}}function Bt(t,e,n){let{orb:o}=e;return t.$$set=t=>{"orb"in t&&n(0,o=t.orb)},[o]}class Rt extends dt{constructor(t){super(),ct(this,t,Bt,Ht,s,{orb:0})}}function Xt(t,e,n){const o=t.slice();return o[1]=e[n],o[3]=n,o}function qt(t){let e,n;return e=new Rt({props:{orb:t[0][t[3]]||null}}),{c(){it(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.orb=t[0][t[3]]||null),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Yt(t){let e,n,o=Array(7),r=[];for(let e=0;e<o.length;e+=1)r[e]=qt(Xt(t,o,e));const i=t=>tt(r[t],1,1,(()=>{r[t]=null}));return{c(){e=x("div");for(let t=0;t<r.length;t+=1)r[t].c();O(e,"class","orb-bar svelte-d4ju5q")},m(t,o){b(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){if(1&n){let s;for(o=Array(7),s=0;s<o.length;s+=1){const i=Xt(t,o,s);r[s]?(r[s].p(i,n),Q(r[s],1)):(r[s]=qt(i),r[s].c(),Q(r[s],1),r[s].m(e,null))}for(J(),s=o.length;s<r.length;s+=1)i(s);K()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)Q(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)tt(r[t]);n=!1},d(t){t&&w(e),$(r,t)}}}function Vt(t,e,n){let o;return a(t,pt,(t=>n(0,o=t))),[o]}class Zt extends dt{constructor(t){super(),ct(this,t,Vt,Yt,s,{})}}function Ut(t,e,n){t.dispatchEvent(new CustomEvent("finalize",{detail:{items:e,info:n}}))}function Gt(t,e,n){t.dispatchEvent(new CustomEvent("consider",{detail:{items:e,info:n}}))}const Jt="draggedEntered",Kt="draggedLeft",Qt="draggedOverIndex",te="draggedLeftDocument",ee="leftForAnother",ne="outsideOfAny";function oe(t,e,n){t.dispatchEvent(new CustomEvent(Jt,{detail:{indexObj:e,draggedEl:n}}))}function re(t,e,n){t.dispatchEvent(new CustomEvent(Kt,{detail:{draggedEl:e,type:ee,theOtherDz:n}}))}function ie(t,e,n){t.dispatchEvent(new CustomEvent(Qt,{detail:{indexObj:e,draggedEl:n}}))}const se="dragStarted",ae=Jt,le="dragEnteredAnother",ce=Qt,de=Kt,ue="draggedLeftAll",fe="droppedIntoZone",ge="droppedIntoAnother",me="droppedOutsideOfAny",pe="dragStopped",he="pointer",ye="keyboard",ve="isDndShadowItem",be="data-is-dnd-shadow-item",we="id:dnd-shadow-placeholder-0000";let $e="id",xe=0;function Ee(){xe++}function De(){if(0===xe)throw new Error("Bug! trying to decrement when there are no dropzones");xe--}const Te="undefined"==typeof window;function Ae(t){let e;const n=t.getBoundingClientRect(),o=getComputedStyle(t),r=o.transform;if(r){let i,s,a,l;if(r.startsWith("matrix3d("))e=r.slice(9,-1).split(/, /),i=+e[0],s=+e[5],a=+e[12],l=+e[13];else{if(!r.startsWith("matrix("))return n;e=r.slice(7,-1).split(/, /),i=+e[0],s=+e[3],a=+e[4],l=+e[5]}const c=o.transformOrigin,d=n.x-a-(1-i)*parseFloat(c),u=n.y-l-(1-s)*parseFloat(c.slice(c.indexOf(" ")+1)),f=i?n.width/i:t.offsetWidth,g=s?n.height/s:t.offsetHeight;return{x:d,y:u,width:f,height:g,top:u,right:d+f,bottom:u+g,left:d}}return n}function Oe(t){const e=Ae(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Se(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function _e(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function Le(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function Ce(t){return _e(Se(t))}function ke(t,e){return Le(Ce(t),Oe(e))}function Ie(t,e){const n=Ce(t),o=Ce(e);return r=n,i=o,Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2));var r,i}let Me;function We(){Me=new Map}function Pe(t,e){if(!ke(t,e))return null;const n=e.children;if(0===n.length)return{index:0,isProximityBased:!0};const o=function(t){const e=Array.from(t.children).findIndex((t=>t.getAttribute(be)));if(e>=0)return Me.has(t)||Me.set(t,new Map),Me.get(t).set(e,Oe(t.children[e])),e}(e);for(let r=0;r<n.length;r++)if(ke(t,n[r])){const n=Me.has(e)&&Me.get(e).get(r);return n&&!Le(Ce(t),n)?{index:o,isProximityBased:!1}:{index:r,isProximityBased:!1}}let r,i=Number.MAX_VALUE;for(let e=0;e<n.length;e++){const o=Ie(t,n[e]);o<i&&(i=o,r=e)}return{index:r,isProximityBased:!0}}We();function Fe(){let t;function e(){t={directionObj:void 0,stepPx:0}}function n(e){const{directionObj:o,stepPx:r}=t;o&&(e.scrollBy(o.x*r,o.y*r),window.requestAnimationFrame((()=>n(e))))}function o(t){return 25-t}return e(),{scrollIfNeeded:function(r,i){if(!i)return!1;const s=function(t,e){const n=Se(e);return Le(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}(r,i);if(null===s)return e(),!1;const a=!!t.directionObj;let[l,c]=[!1,!1];return i.scrollHeight>i.clientHeight&&(s.bottom<25?(l=!0,t.directionObj={x:0,y:1},t.stepPx=o(s.bottom)):s.top<25&&(l=!0,t.directionObj={x:0,y:-1},t.stepPx=o(s.top)),!a&&l)||i.scrollWidth>i.clientWidth&&(s.right<25?(c=!0,t.directionObj={x:1,y:0},t.stepPx=o(s.right)):s.left<25&&(c=!0,t.directionObj={x:-1,y:0},t.stepPx=o(s.left)),!a&&c)?(n(i),!0):(e(),!1)},resetScrolling:e}}function Ne(t){return JSON.stringify(t,null,2)}function je(t){if(!t)throw new Error("cannot get depth of a falsy node");return ze(t,0)}function ze(t,e=0){return t.parentElement?ze(t.parentElement,e+1):e-1}const{scrollIfNeeded:He,resetScrolling:Be}=Fe();let Re;function Xe(t,e,n=200){let o,r,i,s=!1;const a=Array.from(e).sort(((t,e)=>je(e)-je(t)));!function e(){const l=Ce(t);if(!He(l,o)&&i&&Math.abs(i.x-l.x)<10&&Math.abs(i.y-l.y)<10)return void(Re=window.setTimeout(e,n));if(function(t){const e=Se(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}(t))return void function(t){window.dispatchEvent(new CustomEvent(te,{detail:{draggedEl:t}}))}(t);i=l;let c=!1;for(const e of a){const n=Pe(t,e);if(null===n)continue;const{index:i}=n;c=!0,e!==o?(o&&re(o,t,e),oe(e,n,t),o=e):i!==r&&(ie(e,n,t),r=i);break}!c&&s&&o?(!function(t,e){t.dispatchEvent(new CustomEvent(Kt,{detail:{draggedEl:e,type:ne}}))}(o,t),o=void 0,r=void 0,s=!1):s=!0,Re=window.setTimeout(e,n)}()}let qe;function Ye(t){const e=t.touches?t.touches[0]:t;qe={x:e.clientX,y:e.clientY}}const{scrollIfNeeded:Ve,resetScrolling:Ze}=Fe();let Ue;function Ge(){qe&&Ve(qe,document.documentElement),Ue=window.setTimeout(Ge,300)}function Je(t){return`${t} 0.2s ease`}function Ke(t,e,n,o,r){const i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),a=i.width-s.width,l=i.height-s.height;if(a||l){const e={left:(n-s.left)/s.width,top:(o-s.top)/s.height};t.style.height=`${i.height}px`,t.style.width=`${i.width}px`,t.style.left=parseFloat(t.style.left)-e.left*a+"px",t.style.top=parseFloat(t.style.top)-e.top*l+"px"}Qe(e,t),r()}function Qe(t,e){const n=window.getComputedStyle(t);Array.from(n).filter((t=>t.startsWith("background")||t.startsWith("padding")||t.startsWith("font")||t.startsWith("text")||t.startsWith("align")||t.startsWith("justify")||t.startsWith("display")||t.startsWith("flex")||t.startsWith("border")||"opacity"===t||"color"===t||"list-style-type"===t)).forEach((t=>e.style.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))))}function tn(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function en(t,e=(()=>{}),n=(()=>[])){t.forEach((t=>{const o=e(t);Object.keys(o).forEach((e=>{t.style[e]=o[e]})),n(t).forEach((e=>t.classList.add(e)))}))}function nn(t,e=(()=>{}),n=(()=>[])){t.forEach((t=>{const o=e(t);Object.keys(o).forEach((e=>{t.style[e]=""})),n(t).forEach((e=>t.classList.contains(e)&&t.classList.remove(e)))}))}const on={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let rn,sn,an,ln,cn,dn,un,fn,gn,mn,pn,hn=!1,yn=!1,vn=!1;const bn=new Map,wn=new Map,$n=new WeakMap;function xn(t,e){bn.get(e).delete(t),De(),0===bn.get(e).size&&bn.delete(e)}function En(){window.addEventListener("mousemove",Ye),window.addEventListener("touchmove",Ye),Ge();const t=bn.get(ln);for(const e of t)e.addEventListener(Jt,An),e.addEventListener(Kt,On),e.addEventListener(Qt,Sn);window.addEventListener(te,Ln);const e=Math.max(100,...Array.from(t.keys()).map((t=>wn.get(t).dropAnimationDurationMs)));Xe(sn,t,1.07*e)}function Dn(){window.removeEventListener("mousemove",Ye),window.removeEventListener("touchmove",Ye),qe=void 0,window.clearTimeout(Ue),Ze();const t=bn.get(ln);for(const e of t)e.removeEventListener(Jt,An),e.removeEventListener(Kt,On),e.removeEventListener(Qt,Sn);window.removeEventListener(te,Ln),clearTimeout(Re),Be(),We()}function Tn(t){return t.findIndex((t=>!!t.isDndShadowItem&&t.id!==we))}function An(t){let{items:e,dropFromOthersDisabled:n}=wn.get(t.currentTarget);if(n&&t.currentTarget!==cn)return;if(vn=!1,e=e.filter((t=>t.id!==un.id)),cn!==t.currentTarget){const t=wn.get(cn).items.filter((t=>!t.isDndShadowItem));Gt(cn,t,{trigger:le,id:an.id,source:he})}else{const t=function(t){return t.findIndex((t=>t.id===we))}(e);-1!==t&&e.splice(t,1)}const{index:o,isProximityBased:r}=t.detail.indexObj,i=r&&o===t.currentTarget.children.length-1?o+1:o;fn=t.currentTarget,e.splice(i,0,un),Gt(t.currentTarget,e,{trigger:ae,id:an.id,source:he})}function On(t){if(!hn)return;const{items:e,dropFromOthersDisabled:n}=wn.get(t.currentTarget);if(n&&t.currentTarget!==cn&&t.currentTarget!==fn)return;const o=Tn(e),r=e.splice(o,1)[0];fn=void 0;const{type:i,theOtherDz:s}=t.detail;if(i===ne||i===ee&&s!==cn&&wn.get(s).dropFromOthersDisabled){vn=!0,fn=cn;const t=wn.get(cn).items;t.splice(dn,0,r),Gt(cn,t,{trigger:ue,id:an.id,source:he})}Gt(t.currentTarget,e,{trigger:de,id:an.id,source:he})}function Sn(t){const{items:e,dropFromOthersDisabled:n}=wn.get(t.currentTarget);if(n&&t.currentTarget!==cn)return;vn=!1;const{index:o}=t.detail.indexObj,r=Tn(e);e.splice(r,1),e.splice(o,0,un),Gt(t.currentTarget,e,{trigger:ce,id:an.id,source:he})}function _n(t){t.preventDefault();const e=t.touches?t.touches[0]:t;mn={x:e.clientX,y:e.clientY},sn.style.transform=`translate3d(${mn.x-gn.x}px, ${mn.y-gn.y}px, 0)`}function Ln(){yn=!0,window.removeEventListener("mousemove",_n),window.removeEventListener("touchmove",_n),window.removeEventListener("mouseup",Ln),window.removeEventListener("touchend",Ln),Dn(),function(t){t.style.cursor="grab"}(sn),fn||(fn=cn);let{items:t,type:e}=wn.get(fn);nn(bn.get(e),(t=>wn.get(t).dropTargetStyle),(t=>wn.get(t).dropTargetClasses));let n=Tn(t);-1===n&&(n=dn),t=t.map((t=>t.isDndShadowItem?an:t)),function(t,e){const n=Ae(fn.children[t]),o={x:n.left-parseFloat(sn.style.left),y:n.top-parseFloat(sn.style.top)},{dropAnimationDurationMs:r}=wn.get(fn),i=`transform ${r}ms ease`;sn.style.transition=sn.style.transition?sn.style.transition+","+i:i,sn.style.transform=`translate3d(${o.x}px, ${o.y}px, 0)`,window.setTimeout(e,r)}(n,(function(){var e;pn(),Ut(fn,t,{trigger:vn?me:fe,id:an.id,source:he}),fn!==cn&&Ut(cn,wn.get(cn).items,{trigger:ge,id:an.id,source:he}),(e=fn.children[n]).style.visibility="",e.removeAttribute(be),sn.remove(),rn.remove(),sn=void 0,rn=void 0,an=void 0,ln=void 0,cn=void 0,dn=void 0,un=void 0,fn=void 0,gn=void 0,mn=void 0,hn=!1,yn=!1,pn=void 0,vn=!1}))}function Cn(t,e){const n={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:on,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let o=new Map;function r(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i)}function i(){r(),rn=void 0,gn=void 0,mn=void 0}function s(t){t.preventDefault();const e=t.touches?t.touches[0]:t;mn={x:e.clientX,y:e.clientY},(Math.abs(mn.x-gn.x)>=3||Math.abs(mn.y-gn.y)>=3)&&(r(),function(){hn=!0;const t=o.get(rn);dn=t,cn=rn.parentElement;const e=cn.getRootNode(),r=e.body||e,{items:i,type:s,centreDraggedOnCursor:a}=n;an={...i[t]},ln=s,un={...an,[ve]:!0};const l={...un,[$e]:we};function c(){var t;sn.parentElement?window.requestAnimationFrame(c):(r.appendChild(sn),sn.focus(),En(),(t=rn).style.display="none",t.style.position="fixed",t.style.zIndex="-5",r.appendChild(rn))}sn=function(t,e){const n=t.getBoundingClientRect(),o=t.cloneNode(!0);Qe(t,o),o.id="dnd-action-dragged-el",o.style.position="fixed";let r=n.top,i=n.left;if(o.style.top=`${r}px`,o.style.left=`${i}px`,e){const t=_e(n);r-=t.y-e.y,i-=t.x-e.x,window.setTimeout((()=>{o.style.top=`${r}px`,o.style.left=`${i}px`}),0)}return o.style.margin="0",o.style.boxSizing="border-box",o.style.height=`${n.height}px`,o.style.width=`${n.width}px`,o.style.transition=`${Je("top")}, ${Je("left")}, ${Je("background-color")}, ${Je("opacity")}, ${Je("color")} `,window.setTimeout((()=>o.style.transition+=`, ${Je("width")}, ${Je("height")}`),0),o.style.zIndex="9999",o.style.cursor="grabbing",o}(rn,a&&mn),window.requestAnimationFrame(c),en(Array.from(bn.get(n.type)).filter((t=>t===cn||!wn.get(t).dropFromOthersDisabled)),(t=>wn.get(t).dropTargetStyle),(t=>wn.get(t).dropTargetClasses)),i.splice(t,1,l),pn=function(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}(cn),Gt(cn,i,{trigger:se,id:an.id,source:he}),window.addEventListener("mousemove",_n,{passive:!1}),window.addEventListener("touchmove",_n,{passive:!1,capture:!1}),window.addEventListener("mouseup",Ln,{passive:!1}),window.addEventListener("touchend",Ln,{passive:!1})}())}function a(t){if(t.target!==t.currentTarget&&(void 0!==t.target.value||t.target.isContentEditable))return;if(t.button)return;if(hn)return;t.stopPropagation();const e=t.touches?t.touches[0]:t;gn={x:e.clientX,y:e.clientY},mn={...gn},rn=t.currentTarget,window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",i,{passive:!1}),window.addEventListener("touchend",i,{passive:!1})}function l({items:e,flipDurationMs:r=0,type:i="--any--",dragDisabled:s=!1,morphDisabled:l=!1,dropFromOthersDisabled:c=!1,dropTargetStyle:d=on,dropTargetClasses:u=[],transformDraggedElement:f=(()=>{}),centreDraggedOnCursor:g=!1}){var m,p;function h(t,e){return wn.get(t)?wn.get(t)[e]:n[e]}n.dropAnimationDurationMs=r,n.type&&i!==n.type&&xn(t,n.type),n.type=i,m=t,p=i,bn.has(p)||bn.set(p,new Set),bn.get(p).has(m)||(bn.get(p).add(m),Ee()),n.items=[...e],n.dragDisabled=s,n.morphDisabled=l,n.transformDraggedElement=f,n.centreDraggedOnCursor=g,!hn||yn||function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}(d,n.dropTargetStyle)&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(u,n.dropTargetClasses)||(nn([t],(()=>n.dropTargetStyle),(()=>u)),en([t],(()=>d),(()=>u))),n.dropTargetStyle=d,n.dropTargetClasses=[...u],hn&&n.dropFromOthersDisabled!==c&&(c?nn([t],(t=>h(t,"dropTargetStyle")),(t=>h(t,"dropTargetClasses"))):en([t],(t=>h(t,"dropTargetStyle")),(t=>h(t,"dropTargetClasses")))),n.dropFromOthersDisabled=c,wn.set(t,n);const y=Tn(n.items);for(let e=0;e<t.children.length;e++){const r=t.children[e];tn(r,s),e!==y?(r.removeEventListener("mousedown",$n.get(r)),r.removeEventListener("touchstart",$n.get(r)),s||(r.addEventListener("mousedown",a),r.addEventListener("touchstart",a),$n.set(r,a)),o.set(r,e)):(l||Ke(sn,r,mn.x,mn.y,(()=>n.transformDraggedElement(sn,an,e))),(v=r).style.visibility="hidden",v.setAttribute(be,"true"))}var v}return l(e),{update:t=>{l(t)},destroy:()=>{xn(t,n.type),wn.delete(t)}}}const kn={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},In={[kn.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[kn.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"};let Mn;function Wn(){Mn=document.createElement("div"),Mn.id="dnd-action-aria-alert",Mn.style.position="fixed",Mn.style.bottom="0",Mn.style.left="0",Mn.style.zIndex="-5",Mn.style.opacity="0",Mn.style.height="0",Mn.style.width="0",Mn.setAttribute("role","alert"),document.body.prepend(Mn),Object.entries(In).forEach((([t,e])=>document.body.prepend(function(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}(t,e))))}function Pn(t){Mn.innerHTML="";const e=document.createTextNode(t);Mn.appendChild(e),Mn.style.display="none",Mn.style.display="inline"}const Fn={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let Nn,jn,zn,Hn,Bn=!1,Rn="",Xn="";const qn=new WeakSet,Yn=new WeakMap,Vn=new WeakMap,Zn=new Map,Un=new Map,Gn=new Map,Jn=Te?null:("complete"===document.readyState?Wn():window.addEventListener("DOMContentLoaded",Wn),{...kn});function Kn(t,e){jn===t&&oo(),Gn.get(e).delete(t),De(),0===Gn.get(e).size&&Gn.delete(e),0===Gn.size&&(window.removeEventListener("keydown",Qn),window.removeEventListener("click",to))}function Qn(t){if(Bn&&"Escape"===t.key)oo()}function to(){Bn&&(qn.has(document.activeElement)||oo())}function eo(t){if(!Bn)return;const e=t.currentTarget;if(e===jn)return;Rn=e.getAttribute("aria-label")||"";const{items:n}=Un.get(jn),o=n.find((t=>t.id===Hn)),r=n.indexOf(o),i=n.splice(r,1)[0],{items:s,autoAriaDisabled:a}=Un.get(e);e.getBoundingClientRect().top<jn.getBoundingClientRect().top||e.getBoundingClientRect().left<jn.getBoundingClientRect().left?(s.push(i),a||Pn(`Moved item ${Xn} to the end of the list ${Rn}`)):(s.unshift(i),a||Pn(`Moved item ${Xn} to the beginning of the list ${Rn}`));Ut(jn,n,{trigger:ge,id:Hn,source:ye}),Ut(e,s,{trigger:fe,id:Hn,source:ye}),jn=e}function no(){Zn.forEach((({update:t},e)=>t(Un.get(e))))}function oo(t=!0){Un.get(jn).autoAriaDisabled||Pn(`Stopped dragging item ${Xn}`),qn.has(document.activeElement)&&document.activeElement.blur(),t&&Gt(jn,Un.get(jn).items,{trigger:pe,id:Hn,source:ye}),nn(Gn.get(Nn),(t=>Un.get(t).dropTargetStyle),(t=>Un.get(t).dropTargetClasses)),zn=null,Hn=null,Xn="",Nn=null,jn=null,Rn="",Bn=!1,no()}function ro(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Fn,dropTargetClasses:[],autoAriaDisabled:!1};function o(t,e,n){t.length<=1||t.splice(n,1,t.splice(e,1,t[n])[0])}function r(e){switch(e.key){case"Enter":case" ":if((void 0!==e.target.disabled||e.target.href||e.target.isContentEditable)&&!qn.has(e.target))return;e.preventDefault(),e.stopPropagation(),Bn?oo():i(e);break;case"ArrowDown":case"ArrowRight":{if(!Bn)return;e.preventDefault(),e.stopPropagation();const{items:r}=Un.get(t),i=Array.from(t.children),s=i.indexOf(e.currentTarget);s<i.length-1&&(n.autoAriaDisabled||Pn(`Moved item ${Xn} to position ${s+2} in the list ${Rn}`),o(r,s,s+1),Ut(t,r,{trigger:fe,id:Hn,source:ye}));break}case"ArrowUp":case"ArrowLeft":{if(!Bn)return;e.preventDefault(),e.stopPropagation();const{items:r}=Un.get(t),i=Array.from(t.children).indexOf(e.currentTarget);i>0&&(n.autoAriaDisabled||Pn(`Moved item ${Xn} to position ${i} in the list ${Rn}`),o(r,i,i-1),Ut(t,r,{trigger:fe,id:Hn,source:ye}));break}}}function i(e){!function(e){const{items:n}=Un.get(t),o=Array.from(t.children),r=o.indexOf(e);zn=e,zn.tabIndex=0,Hn=n[r].id,Xn=o[r].getAttribute("aria-label")||""}(e.currentTarget),jn=t,Nn=n.type,Bn=!0;const o=Array.from(Gn.get(n.type)).filter((t=>t===jn||!Un.get(t).dropFromOthersDisabled));if(en(o,(t=>Un.get(t).dropTargetStyle),(t=>Un.get(t).dropTargetClasses)),!n.autoAriaDisabled){let t=`Started dragging item ${Xn}. Use the arrow keys to move it within its list ${Rn}`;o.length>1&&(t+=", or tab to another list in order to move the item into it"),Pn(t)}Gt(t,Un.get(t).items,{trigger:se,id:Hn,source:ye}),no()}function s(t){Bn&&t.currentTarget!==zn&&(t.stopPropagation(),oo(!1),i(t))}function a({items:e=[],type:o="--any--",dragDisabled:i=!1,zoneTabIndex:a=0,dropFromOthersDisabled:l=!1,dropTargetStyle:c=Fn,dropTargetClasses:d=[],autoAriaDisabled:u=!1}){var f,g;n.items=[...e],n.dragDisabled=i,n.dropFromOthersDisabled=l,n.zoneTabIndex=a,n.dropTargetStyle=c,n.dropTargetClasses=d,n.autoAriaDisabled=u,u||(t.setAttribute("aria-disabled",i),t.setAttribute("role","list"),t.setAttribute("aria-describedby",i?Jn.DND_ZONE_DRAG_DISABLED:Jn.DND_ZONE_ACTIVE)),n.type&&o!==n.type&&Kn(t,n.type),n.type=o,f=t,g=o,0===Gn.size&&(window.addEventListener("keydown",Qn),window.addEventListener("click",to)),Gn.has(g)||Gn.set(g,new Set),Gn.get(g).has(f)||(Gn.get(g).add(f),Ee()),Un.set(t,n),t.tabIndex=Bn?t===jn||zn.contains(t)||n.dropFromOthersDisabled||jn&&n.type!==Un.get(jn).type?-1:0:n.zoneTabIndex,t.addEventListener("focus",eo);for(let e=0;e<t.children.length;e++){const o=t.children[e];qn.add(o),o.tabIndex=Bn?-1:0,u||o.setAttribute("role","listitem"),o.removeEventListener("keydown",Yn.get(o)),o.removeEventListener("click",Vn.get(o)),i||(o.addEventListener("keydown",r),Yn.set(o,r),o.addEventListener("click",s),Vn.set(o,s)),Bn&&n.items[e].id===Hn&&(zn=o,zn.tabIndex=0,o.focus())}}a(e);const l={update:t=>{a(t)},destroy:()=>{Kn(t,n.type),Un.delete(t),Zn.delete(t)}};return Zn.set(t,l),l}function io(t,e){so(e);const n=Cn(t,e),o=ro(t,e);return{update:t=>{so(t),n.update(t),o.update(t)},destroy:()=>{n.destroy(),o.destroy()}}}function so(t){const{items:e,flipDurationMs:n,type:o,dragDisabled:r,morphDisabled:i,dropFromOthersDisabled:s,zoneTabIndex:a,dropTargetStyle:l,dropTargetClasses:c,transformDraggedElement:d,autoAriaDisabled:u,centreDraggedOnCursor:f,...g}=t;if(Object.keys(g).length>0&&console.warn("dndzone will ignore unknown options",g),!e)throw new Error("no 'items' key provided to dndzone");const m=e.find((t=>!{}.hasOwnProperty.call(t,$e)));if(m)throw new Error(`missing 'id' property for item ${Ne(m)}`);if(c&&!Array.isArray(c))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof c}, ${Ne(c)}`);if(a&&(p=a,isNaN(p)||(0|(h=parseFloat(p)))!==h))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof a}, ${Ne(a)}`);var p,h}function ao(e){let n;return{c(){n=x("div"),O(n,"class","ability-tile svelte-fwh5s7")},m(t,e){b(t,n,e)},p:t,d(t){t&&w(n)}}}function lo(e){let n;return{c(){n=x("div"),n.textContent="Nothing!",O(n,"class","expanded ability-tile svelte-fwh5s7")},m(t,e){b(t,n,e)},p:t,d(t){t&&w(n)}}}function co(t){let e,n,o,r,i,s=t[0].icon+"";return{c(){e=x("div"),n=E(s),o=D(),r=x("div"),O(r,"class","progress-bar svelte-fwh5s7"),O(e,"class","ability-tile icon svelte-fwh5s7"),O(e,"title",i=`${t[0].name}: ${t[0].damage} damage`),_(e,"--completion-percent",t[4]+"%"),L(e,"active",t[0].active)},m(t,i){b(t,e,i),h(e,n),h(e,o),h(e,r)},p(t,o){1&o&&s!==(s=t[0].icon+"")&&S(n,s),1&o&&i!==(i=`${t[0].name}: ${t[0].damage} damage`)&&O(e,"title",i),16&o&&_(e,"--completion-percent",t[4]+"%"),1&o&&L(e,"active",t[0].active)},d(t){t&&w(e)}}}function uo(t){let e,n,o,r,i,s,a,l,c,d,u,f,g,m=t[0].name+"",p=t[0].speed+"",y=t[0].damage>0&&fo(t),v=t[0].heal>0&&go(t),$=t[0].cost&&mo(t),T=t[0].orbs&&po(t);return{c(){e=x("div"),n=x("b"),o=E(m),r=D(),i=x("br"),s=E("\r\n\t\tðŸ’¨: "),a=E(p),l=D(),y&&y.c(),c=D(),v&&v.c(),d=D(),$&&$.c(),u=D(),T&&T.c(),f=D(),g=x("div"),O(g,"class","progress-bar svelte-fwh5s7"),O(e,"class","expanded ability-tile svelte-fwh5s7"),_(e,"--completion-percent",t[4]+"%"),L(e,"active",t[3]),L(e,"dragging",t[2])},m(t,m){b(t,e,m),h(e,n),h(n,o),h(e,r),h(e,i),h(e,s),h(e,a),h(e,l),y&&y.m(e,null),h(e,c),v&&v.m(e,null),h(e,d),$&&$.m(e,null),h(e,u),T&&T.m(e,null),h(e,f),h(e,g)},p(t,n){1&n&&m!==(m=t[0].name+"")&&S(o,m),1&n&&p!==(p=t[0].speed+"")&&S(a,p),t[0].damage>0?y?y.p(t,n):(y=fo(t),y.c(),y.m(e,c)):y&&(y.d(1),y=null),t[0].heal>0?v?v.p(t,n):(v=go(t),v.c(),v.m(e,d)):v&&(v.d(1),v=null),t[0].cost?$?$.p(t,n):($=mo(t),$.c(),$.m(e,u)):$&&($.d(1),$=null),t[0].orbs?T?T.p(t,n):(T=po(t),T.c(),T.m(e,f)):T&&(T.d(1),T=null),16&n&&_(e,"--completion-percent",t[4]+"%"),8&n&&L(e,"active",t[3]),4&n&&L(e,"dragging",t[2])},d(t){t&&w(e),y&&y.d(),v&&v.d(),$&&$.d(),T&&T.d()}}}function fo(t){let e,n,o=t[0].damage+"";return{c(){e=E("âš”: "),n=E(o)},m(t,o){b(t,e,o),b(t,n,o)},p(t,e){1&e&&o!==(o=t[0].damage+"")&&S(n,o)},d(t){t&&w(e),t&&w(n)}}}function go(t){let e,n,o=t[0].heal+"";return{c(){e=E("ðŸ’š: "),n=E(o)},m(t,o){b(t,e,o),b(t,n,o)},p(t,e){1&e&&o!==(o=t[0].heal+"")&&S(n,o)},d(t){t&&w(e),t&&w(n)}}}function mo(t){let e,n,o,r=Object.entries(t[0].cost).map(t[5]).join("")+"";return{c(){e=x("br"),n=E("\r\n\t\t\tâž–: "),o=E(r)},m(t,r){b(t,e,r),b(t,n,r),b(t,o,r)},p(t,e){1&e&&r!==(r=Object.entries(t[0].cost).map(t[5]).join("")+"")&&S(o,r)},d(t){t&&w(e),t&&w(n),t&&w(o)}}}function po(t){let e,n,o,r=t[0].orbs.map(t[6]).join("")+"";return{c(){e=x("br"),n=E("\r\n\t\t\tâž•: "),o=E(r)},m(t,r){b(t,e,r),b(t,n,r),b(t,o,r)},p(t,e){1&e&&r!==(r=t[0].orbs.map(t[6]).join("")+"")&&S(o,r)},d(t){t&&w(e),t&&w(n),t&&w(o)}}}function ho(e){let n;function o(t,e){return t[0]&&t[1]?uo:t[0]?co:t[1]?lo:ao}let r=o(e),i=r(e);return{c(){i.c(),n=T()},m(t,e){i.m(t,e),b(t,n,e)},p(t,[e]){r===(r=o(t))&&i?i.p(t,e):(i.d(1),i=r(t),i&&(i.c(),i.m(n.parentNode,n)))},i:t,o:t,d(t){i.d(t),t&&w(n)}}}function yo(t,e,n){let{ability:o=null,expanded:r=!1}=e,{dragging:i=!1}=e,{active:s=!1}=e,{completion:a=0}=e;return t.$$set=t=>{"ability"in t&&n(0,o=t.ability),"expanded"in t&&n(1,r=t.expanded),"dragging"in t&&n(2,i=t.dragging),"active"in t&&n(3,s=t.active),"completion"in t&&n(4,a=t.completion)},[o,r,i,s,a,([t,e])=>vt[t].icon.repeat(e),t=>vt[t].icon]}class vo extends dt{constructor(t){super(),ct(this,t,yo,ho,s,{ability:0,expanded:1,dragging:2,active:3,completion:4})}}function bo(t,e,n){const o=t.slice();return o[12]=e[n],o[14]=n,o}function wo(e){let n;return{c(){n=x("div")},m(t,e){b(t,n,e)},p:t,i:t,o:t,d(t){t&&w(n)}}}function $o(t){let e,n;return e=new vo({props:{active:t[1],ability:t[2],expanded:t[0],completion:t[4]}}),{c(){it(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.active=t[1]),4&n&&(o.ability=t[2]),1&n&&(o.expanded=t[0]),16&n&&(o.completion=t[4]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function xo(t,e){let n,o,r,i,s;const a=[$o,wo],l=[];function c(t,e){return 0===t[14]?0:1}return o=c(e),r=l[o]=a[o](e),{key:t,first:null,c(){n=T(),r.c(),i=T(),this.first=n},m(t,e){b(t,n,e),l[o].m(t,e),b(t,i,e),s=!0},p(t,n){let s=o;o=c(e=t),o===s?l[o].p(e,n):(J(),tt(l[s],1,1,(()=>{l[s]=null})),K(),r=l[o],r?r.p(e,n):(r=l[o]=a[o](e),r.c()),Q(r,1),r.m(i.parentNode,i))},i(t){s||(Q(r),s=!0)},o(t){tt(r),s=!1},d(t){t&&w(n),l[o].d(t),t&&w(i)}}}function Eo(t){let e,n,o,s,a,l=[],c=new Map,u=t[3];const f=t=>t[12].id;for(let e=0;e<u.length;e+=1){let n=bo(t,u,e),o=f(n);c.set(o,l[e]=xo(o,n))}return{c(){e=x("div");for(let t=0;t<l.length;t+=1)l[t].c()},m(r,i){b(r,e,i);for(let t=0;t<l.length;t+=1)l[t].m(e,null);o=!0,s||(a=[d(n=io.call(null,e,{items:t[3],morphDisabled:!0})),A(e,"finalize",t[6]),A(e,"consider",t[5])],s=!0)},p(t,[o]){31&o&&(u=t[3],J(),l=rt(l,o,f,1,t,u,c,e,ot,xo,null,bo),K()),n&&i(n.update)&&8&o&&n.update.call(null,{items:t[3],morphDisabled:!0})},i(t){if(!o){for(let t=0;t<u.length;t+=1)Q(l[t]);o=!0}},o(t){for(let t=0;t<l.length;t+=1)tt(l[t]);o=!1},d(t){t&&w(e);for(let t=0;t<l.length;t+=1)l[t].d();s=!1,r(a)}}}function Do(t,e,n){let o,r,i,s,l;a(t,mt,(t=>n(11,s=t))),a(t,gt,(t=>n(10,l=t)));let{slot:d,expanded:u,active:f}=e,g=yt[s[d]],m=[{id:0,...g}];return t.$$set=t=>{"slot"in t&&n(7,d=t.slot),"expanded"in t&&n(0,u=t.expanded),"active"in t&&n(1,f=t.active)},t.$$.update=()=>{4&t.$$.dirty&&n(8,o=1e3*g.speed),1026&t.$$.dirty&&n(9,r=f?l.abilityWindup:0),768&t.$$.dirty&&n(4,i=r/o*100)},[u,f,g,m,i,function(t){0==t.detail.items.length&&(t.detail.items=[yt[0]]),n(3,m=t.detail.items)},function(t){t.detail.items=t.detail.items.filter((t=>!t.isDndShadowItem)),n(3,m=[t.detail.items[0]]),c(mt,s[d]=m[0].id,s),mt.set(s),n(2,g=yt[m[0].id])},d,o,r,l]}class To extends dt{constructor(t){super(),ct(this,t,Do,Eo,s,{slot:7,expanded:0,active:1})}}function Ao(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function Oo(t){let e;return{c(){e=x("span"),e.textContent="+",O(e,"class","svelte-1p77nsc")},m(t,n){b(t,e,n)},d(t){t&&w(e)}}}function So(t){let e;return{c(){e=x("span"),e.textContent="âˆ’",O(e,"class","svelte-1p77nsc")},m(t,n){b(t,e,n)},d(t){t&&w(e)}}}function _o(t){let e,n;return e=new To({props:{active:t[0]==t[5],slot:t[5],expanded:t[1]}}),{c(){it(e.$$.fragment)},m(t,o){st(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.active=t[0]==t[5]),2&n&&(o.expanded=t[1]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Lo(t){let e,n,o,r,i,s;function a(t,e){return t[1]?So:Oo}let l=a(t),c=l(t),d=Array(5),u=[];for(let e=0;e<d.length;e+=1)u[e]=_o(Ao(t,d,e));const f=t=>tt(u[t],1,1,(()=>{u[t]=null}));return{c(){e=x("div"),n=x("div"),c.c(),o=D();for(let t=0;t<u.length;t+=1)u[t].c();O(n,"class","expand-icon svelte-1p77nsc"),O(e,"class","ability-bar svelte-1p77nsc")},m(a,l){b(a,e,l),h(e,n),c.m(n,null),h(e,o);for(let t=0;t<u.length;t+=1)u[t].m(e,null);r=!0,i||(s=A(n,"click",t[2]),i=!0)},p(t,[o]){if(l!==(l=a(t))&&(c.d(1),c=l(t),c&&(c.c(),c.m(n,null))),3&o){let n;for(d=Array(5),n=0;n<d.length;n+=1){const r=Ao(t,d,n);u[n]?(u[n].p(r,o),Q(u[n],1)):(u[n]=_o(r),u[n].c(),Q(u[n],1),u[n].m(e,null))}for(J(),n=d.length;n<u.length;n+=1)f(n);K()}},i(t){if(!r){for(let t=0;t<d.length;t+=1)Q(u[t]);r=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)tt(u[t]);r=!1},d(t){t&&w(e),c.d(),$(u,t),i=!1,s()}}}function Co(t,e,n){let o=!0,{activeIndex:r=0}=e;return t.$$set=t=>{"activeIndex"in t&&n(0,r=t.activeIndex)},[r,o,()=>n(1,o=!o)]}class ko extends dt{constructor(t){super(),ct(this,t,Co,Lo,s,{activeIndex:0})}}function Io(t,e,n){const o=t.slice();return o[3]=e[n],o}function Mo(t,e){let n,o,r;return o=new vo({props:{expanded:!0,ability:e[3],dragging:!!e[3].isDndShadowItem}}),{key:t,first:null,c(){n=T(),it(o.$$.fragment),this.first=n},m(t,e){b(t,n,e),st(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.ability=e[3]),1&n&&(r.dragging=!!e[3].isDndShadowItem),o.$set(r)},i(t){r||(Q(o.$$.fragment,t),r=!0)},o(t){tt(o.$$.fragment,t),r=!1},d(t){t&&w(n),at(o,t)}}}function Wo(t){let e,n,o,s,a,l,c,u,f=[],g=new Map,m=t[0];const p=t=>t[3].id;for(let e=0;e<m.length;e+=1){let n=Io(t,m,e),o=p(n);g.set(o,f[e]=Mo(o,n))}return{c(){e=x("div"),n=x("h3"),n.textContent="Ability List",o=D(),s=x("div");for(let t=0;t<f.length;t+=1)f[t].c();O(s,"class","ability-list svelte-1611kdx"),O(e,"class","ability-list-container svelte-1611kdx")},m(r,i){b(r,e,i),h(e,n),h(e,o),h(e,s);for(let t=0;t<f.length;t+=1)f[t].m(s,null);l=!0,c||(u=[d(a=io.call(null,s,{items:t[0]})),A(s,"consider",t[1]),A(s,"finalize",t[2])],c=!0)},p(t,[e]){1&e&&(m=t[0],J(),f=rt(f,e,p,1,t,m,g,s,ot,Mo,null,Io),K()),a&&i(a.update)&&1&e&&a.update.call(null,{items:t[0]})},i(t){if(!l){for(let t=0;t<m.length;t+=1)Q(f[t]);l=!0}},o(t){for(let t=0;t<f.length;t+=1)tt(f[t]);l=!1},d(t){t&&w(e);for(let t=0;t<f.length;t+=1)f[t].d();c=!1,r(u)}}}function Po(t,e,n){let o=Object.values(yt);return[o,function(t){const{trigger:e,id:r}=t.detail.info;if(e===se){const e=o.findIndex((t=>t.id===r)),i=`${r}_copy`;t.detail.items=t.detail.items.filter((t=>!t.isDndShadowItem)),t.detail.items.splice(e,0,{...o[e],id:i}),n(0,o=t.detail.items)}else n(0,o=[...o])},function(t){n(0,o=t.detail.items.map((t=>(t.id="string"==typeof t.id?parseInt(t.id.replace("_copy","")):t.id,t))))}]}class Fo extends dt{constructor(t){super(),ct(this,t,Po,Wo,s,{})}}function No(t){let e,n,o,r,i,s,a,l,c,d,u,f,g,m,p,y,v,$,T,A,_=t[1].gold+"",L=zo(t[1].combo)+"",C=t[1].combo+"",k=1!=t[1].combo?"s":"";return g=new Nt({}),p=new ko({props:{activeIndex:t[0]}}),v=new Zt({}),T=new Fo({}),{c(){e=x("main"),n=x("div"),o=E("Gold: "),r=E(_),i=E(" | Combo: "),s=E(L),a=E("x ("),l=E(C),c=E(" hit"),d=E(k),u=E(")"),f=D(),it(g.$$.fragment),m=D(),it(p.$$.fragment),y=D(),it(v.$$.fragment),$=D(),it(T.$$.fragment),O(e,"class","app svelte-18nzsz3")},m(t,w){b(t,e,w),h(e,n),h(n,o),h(n,r),h(n,i),h(n,s),h(n,a),h(n,l),h(n,c),h(n,d),h(n,u),h(e,f),st(g,e,null),h(e,m),st(p,e,null),h(e,y),st(v,e,null),h(e,$),st(T,e,null),A=!0},p(t,[e]){(!A||2&e)&&_!==(_=t[1].gold+"")&&S(r,_),(!A||2&e)&&L!==(L=zo(t[1].combo)+"")&&S(s,L),(!A||2&e)&&C!==(C=t[1].combo+"")&&S(l,C),(!A||2&e)&&k!==(k=1!=t[1].combo?"s":"")&&S(d,k);const n={};1&e&&(n.activeIndex=t[0]),p.$set(n)},i(t){A||(Q(g.$$.fragment,t),Q(p.$$.fragment,t),Q(v.$$.fragment,t),Q(T.$$.fragment,t),A=!0)},o(t){tt(g.$$.fragment,t),tt(p.$$.fragment,t),tt(v.$$.fragment,t),tt(T.$$.fragment,t),A=!1},d(t){t&&w(e),at(g),at(p),at(v),at(T)}}}function jo(t,e){if(!t)return!0;const n=e.reduce((function(t,e){return t[e]?++t[e]:t[e]=1,t}),{});return Object.entries(t).every((([t,e])=>n[t]&&n[t]>=e))}function zo(t){return Math.floor((t+1)**.5)}function Ho(t,e=1){return e=(new Date).getTime()-e,t.filter((t=>t.start>e))}function Bo(t,e,n){let o,r,i,s;a(t,pt,(t=>n(2,o=t))),a(t,mt,(t=>n(3,r=t))),a(t,gt,(t=>n(1,i=t))),a(t,ht,(t=>n(4,s=t)));let l=0;!function(){const t=localStorage.getItem("gameState");if(!t||!t.length)return!1;const e=JSON.parse(t);if(!e)return!1;console.log("Loaded game"),c(mt,r=e.activeAbilities,r)}(),setInterval((function(){d(),u(),function(){const t={activeAbilities:r,savedAt:(new Date).getTime()};localStorage.setItem("gameState",JSON.stringify(t))}()}),50);const d=()=>{const t=l,e=yt[r[t]];if(c(gt,i.effects=Ho(i.effects),i),!jo(e.cost,o))return void f(t);c(gt,i.abilityWindup+=50,i);const n=1e3*e.speed;if(i.abilityWindup>=n){c(pt,o=function(t,e){t.cost;const n={...t.cost};return e.filter((t=>!n[t]||(n[t]--,!1)))}(e,o),o);const r=zo(i.combo),a=(e.damage||0)*r,l=(e.heal||0)*r;c(ht,s.health-=a,s),c(gt,i.health+=l,i),i.health>i.maxHealth&&c(gt,i.health=i.maxHealth,i),c(gt,i.abilityWindup-=n,i),a>0&&c(ht,s.effects=[...s.effects,{text:`-${a}`,start:(new Date).getTime(),type:"damage"}],s),l>0&&c(gt,i.effects=[...i.effects,{text:`${l}`,start:(new Date).getTime(),type:"heal"}],i),e.name,e.orbs&&c(pt,o=[...o,...e.orbs],o),0==o.length?c(gt,i.combo=0,i):o.length>i.maxOrbs&&(c(gt,i.effects=[...i.effects,{text:"Combo Reset!",start:(new Date).getTime(),type:"damage"}],i),c(gt,i.combo=0,i),c(pt,o=o.slice(-1*i.maxOrbs),o)),e.speed>0&&c(gt,i.combo+=1,i),f(t)}},u=()=>{if(c(ht,s.effects=Ho(s.effects),s),s.health<=0){const t=Math.floor(Math.random()*(s.maxHealth/10))+1;return s.title,c(gt,i.gold+=t,i),c(ht,s.maxHealth+=10,s),c(ht,s.health=s.maxHealth,s),c(ht,s.abilityWindup=0,s),n(0,l=0),c(gt,i.abilityWindup=0,i),c(gt,i.combo=0,i),void c(pt,o=[],o)}c(ht,s.abilityWindup+=50,s);const t=1e3*s.speed;s.abilityWindup>=t&&(c(ht,s.abilityWindup-=t,s),c(gt,i.health-=s.damage,i),c(gt,i.effects=[...i.effects,{text:`-${s.damage}`,start:(new Date).getTime(),type:"damage"}],i),s.title,s.damage,i.health<=0&&(n(0,l=0),c(gt,i.abilityWindup=0,i),c(gt,i.combo=0,i),c(pt,o=[],o),c(gt,i.gold=0,i),c(gt,i.combo=0,i),c(gt,i.health=i.maxHealth,i)))},f=t=>{let e=r[t+1]?t+1:0;const i=yt[r[e]];if(i.cost&&!jo(i.cost,o))return i.name,void f(e);n(0,l=e)};return[l,i]}return new class extends dt{constructor(t){super(),ct(this,t,Bo,No,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
