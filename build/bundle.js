var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(t,e,n,o){if(t){const r=a(t,e,n,o);return t[0](r)}}function a(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function d(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}function u(t,e,n,o,r,i){if(r){const s=a(e,n,o,i);t.p(s,r)}}function f(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function p(t){return null==t?"":t}function m(t,e,n){return t.set(n),e}function g(e){return e&&i(e.destroy)?e.destroy:t}const h="undefined"!=typeof window;let $=h?()=>window.performance.now():()=>Date.now(),y=h?t=>requestAnimationFrame(t):t;const b=new Set;function v(t){b.forEach((e=>{e.c(t)||(b.delete(e),e.f())})),0!==b.size&&y(v)}function w(t,e){t.appendChild(e)}function x(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function E(t){const e=_("style");return function(t,e){w(t.head||t,e)}(x(t),e),e}function D(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode.removeChild(t)}function A(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function O(t){return document.createTextNode(t)}function S(){return O(" ")}function k(){return O("")}function I(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function L(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function M(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function P(t,e,n){t.classList[n?"add":"remove"](e)}const W=new Set;let F,N=0;function j(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),N-=r,N||y((()=>{N||(W.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),W.clear())})))}function z(t){F=t}function H(){if(!F)throw new Error("Function called outside component initialization");return F}function B(t){H().$$.on_mount.push(t)}function R(t){return H().$$.context.get(t)}const X=[],q=[],Y=[],V=[],Z=Promise.resolve();let U=!1;function G(){U||(U=!0,Z.then(tt))}function J(t){Y.push(t)}let K=!1;const Q=new Set;function tt(){if(!K){K=!0;do{for(let t=0;t<X.length;t+=1){const e=X[t];z(e),et(e.$$)}for(z(null),X.length=0;q.length;)q.pop()();for(let t=0;t<Y.length;t+=1){const e=Y[t];Q.has(e)||(Q.add(e),e())}Y.length=0}while(X.length);for(;V.length;)V.pop()();U=!1,K=!1,Q.clear()}}function et(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}let nt;function ot(t,e,n){t.dispatchEvent(function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(`${e?"intro":"outro"}${n}`))}const rt=new Set;let it;function st(){it={r:0,c:[],p:it}}function lt(){it.r||r(it.c),it=it.p}function ct(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function at(t,e,n,o){if(t&&t.o){if(rt.has(t))return;rt.add(t),it.c.push((()=>{rt.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const dt={duration:0};function ut(n,o,s){let l,c=o(n,s),a=!0;const d=it;function u(){const{delay:o=0,duration:i=300,easing:s=e,tick:u=t,css:f}=c||dt;f&&(l=function(t,e,n,o,r,i,s,l=0){const c=16.666/o;let a="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*i(t);a+=100*t+`%{${s(o,1-o)}}\n`}const d=a+`100% {${s(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(d)}_${l}`,f=x(t);W.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=E(t).sheet),m=f.__svelte_rules||(f.__svelte_rules={});m[u]||(m[u]=!0,p.insertRule(`@keyframes ${u} ${d}`,p.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${u} ${o}ms linear ${r}ms 1 both`,N+=1,u}(n,1,0,i,o,s,f));const p=$()+o,m=p+i;J((()=>ot(n,!1,"start"))),function(t){let e;0===b.size&&y(v),new Promise((n=>{b.add(e={c:t,f:n})}))}((t=>{if(a){if(t>=m)return u(0,1),ot(n,!1,"end"),--d.r||r(d.c),!1;if(t>=p){const e=s((t-p)/i);u(1-e,e)}}return a}))}return d.r+=1,i(c)?(nt||(nt=Promise.resolve(),nt.then((()=>{nt=null}))),nt).then((()=>{c=c(),u()})):u(),{end(t){t&&c.tick&&c.tick(1,0),a&&(l&&j(n,l),a=!1)}}}function ft(t,e){t.d(1),e.delete(t.key)}function pt(t,e){at(t,1,1,(()=>{e.delete(t.key)}))}function mt(t,e,n,o,r,i,s,l,c,a,d,u){let f=t.length,p=i.length,m=f;const g={};for(;m--;)g[t[m].key]=m;const h=[],$=new Map,y=new Map;for(m=p;m--;){const t=u(r,i,m),l=n(t);let c=s.get(l);c?o&&c.p(t,e):(c=a(l,t),c.c()),$.set(l,h[m]=c),l in g&&y.set(l,Math.abs(m-g[l]))}const b=new Set,v=new Set;function w(t){ct(t,1),t.m(l,d),s.set(t.key,t),d=t.first,p--}for(;f&&p;){const e=h[p-1],n=t[f-1],o=e.key,r=n.key;e===n?(d=e.first,f--,p--):$.has(r)?!s.has(o)||b.has(o)?w(e):v.has(r)?f--:y.get(o)>y.get(r)?(v.add(o),w(e)):(b.add(r),f--):(c(n,s),f--)}for(;f--;){const e=t[f];$.has(e.key)||c(e,s)}for(;p;)w(h[p-1]);return h}function gt(t){t&&t.c()}function ht(t,e,o,s){const{fragment:l,on_mount:c,on_destroy:a,after_update:d}=t.$$;l&&l.m(e,o),s||J((()=>{const e=c.map(n).filter(i);a?a.push(...e):r(e),t.$$.on_mount=[]})),d.forEach(J)}function $t(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(e,n,i,s,l,c,a,d=[-1]){const u=F;z(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||u.$$.root};a&&a(f.root);let p=!1;if(f.ctx=i?i(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),p&&function(t,e){-1===t.$$.dirty[0]&&(X.push(t),G(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(T)}else f.fragment&&f.fragment.c();n.intro&&ct(e.$$.fragment),ht(e,n.target,n.anchor,n.customElement),tt()}z(u)}class bt{$destroy(){$t(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const vt=[];function wt(e,n=t){let o;const r=new Set;function i(t){if(s(e,t)&&(e=t,o)){const t=!vt.length;for(const t of r)t[1](),vt.push(t,e);if(t){for(let t=0;t<vt.length;t+=2)vt[t][0](vt[t+1]);vt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,l=t){const c=[s,l];return r.add(c),1===r.size&&(o=n(i)||t),s(e),()=>{r.delete(c),0===r.size&&(o(),o=null)}}}}const xt=wt({title:"Player",health:100,maxHealth:100,activeAbilityIndex:0,abilityWindup:0,maxOrbs:7,gold:0,combo:0,effects:[],location:0}),Et=wt([2,3,4,5,0]),Dt=wt([]),Tt=wt({title:"Enemy",health:100,maxHealth:100,damage:1,speed:2.5,abilityWindup:0,effects:[]}),At=t=>t.reduce(((t,e,n)=>(e.id=n,t[e.id]=e,t)),{}),_t=At([{name:"Nothing!",icon:"-",damage:0,speed:0},{name:"Punch",icon:"P",damage:1,speed:2},{name:"Fire Bolt",icon:"F",damage:1,speed:2,orbs:["F"]},{name:"Kick",icon:"K",damage:2,speed:3,orbs:["P"]},{name:"Roundhouse",icon:"R",damage:3,speed:2,cost:{P:2}},{name:"Healing Flame",icon:"H",speed:5,damage:0,heal:8,cost:{F:2,P:1}},{name:"Splash",icon:"S",damage:0,speed:1,orbs:["W"]},{name:"Steam Blast",icon:"SB",damage:3,speed:1,cost:{W:2,F:1},orbs:["W"]},{name:"Ice Armor",icon:"IA",heal:5,speed:1,cost:{W:3}},{name:"Rock Toss",icon:"RT",damage:2,speed:5,orbs:["E","E"]},{name:"Stone Fist",icon:"SF",damage:4,speed:3,cost:{P:1,E:1},orbs:["P","P"]},{name:"Mud Slap",icon:"MS",damage:3,speed:2,cost:{W:1,E:1},orbs:["E","P"]},{name:"Landslide",icon:"LS",damage:20,speed:5,cost:{E:5}}]),Ot={P:{title:"Physical",color:"#383838",icon:"âš«"},F:{title:"Flame",color:"#e81224",icon:"ðŸ”´"},W:{title:"Water",color:"#0078d7",icon:"ðŸ”µ"},E:{title:"Earth",color:"#8e562e",icon:"ðŸŸ¤"}},St=[{name:"Town"},{name:"Killing Fields"}];At(St);const kt={title:"Test Enemy",health:100,maxHealth:100,damage:1,speed:2.5,abilityWindup:0,effects:[]};function It(e){let n,o,r,i;return{c(){n=_("div"),o=O(e[1]),r=O(" / "),i=O(e[0]),L(n,"class","healthbar svelte-4tknbb")},m(t,e){D(t,n,e),w(n,o),w(n,r),w(n,i)},p(t,[e]){2&e&&C(o,t[1]),1&e&&C(i,t[0])},i:t,o:t,d(t){t&&T(n)}}}function Lt(t,e,n){let{maxHealth:o}=e,{health:r}=e;return t.$$set=t=>{"maxHealth"in t&&n(0,o=t.maxHealth),"health"in t&&n(1,r=t.health)},[o,r]}class Ct extends bt{constructor(t){super(),yt(this,t,Lt,It,s,{maxHealth:0,health:1})}}function Mt(t){const e=t-1;return e*e*e+1}function Pt(t){return Math.sin(t*Math.PI/2)}function Wt(t,{delay:e=0,duration:n=400,easing:o=Mt,x:r=0,y:i=0,opacity:s=0}={}){const l=getComputedStyle(t),c=+l.opacity,a="none"===l.transform?"":l.transform,d=c*(1-s);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*r}px, ${(1-t)*i}px);\n\t\t\topacity: ${c-d*e}`}}function Ft(t){let e,n,o,r,i,s=t[0].text+"";return{c(){e=_("div"),n=O(s),L(e,"class",o="effect type-"+t[0].type+" svelte-1lsyiv5")},m(t,o){D(t,e,o),w(e,n),i=!0},p(r,[l]){t=r,(!i||1&l)&&s!==(s=t[0].text+"")&&C(n,s),(!i||1&l&&o!==(o="effect type-"+t[0].type+" svelte-1lsyiv5"))&&L(e,"class",o)},i(t){i||(r&&r.end(1),i=!0)},o(t){r=ut(e,Wt,{duration:1500,y:-50,opacity:0,easing:Pt}),i=!1},d(t){t&&T(e),t&&r&&r.end()}}}function Nt(t,e,n){let{effect:o}=e;return t.$$set=t=>{"effect"in t&&n(0,o=t.effect)},[o]}class jt extends bt{constructor(t){super(),yt(this,t,Nt,Ft,s,{effect:0})}}function zt(t,e,n){const o=t.slice();return o[1]=e[n],o}function Ht(t,e){let n,o,r;return o=new jt({props:{effect:e[1]}}),{key:t,first:null,c(){n=k(),gt(o.$$.fragment),this.first=n},m(t,e){D(t,n,e),ht(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.effect=e[1]),o.$set(r)},i(t){r||(ct(o.$$.fragment,t),r=!0)},o(t){at(o.$$.fragment,t),r=!1},d(t){t&&T(n),$t(o,t)}}}function Bt(t){let e,n,o=[],r=new Map,i=t[0];const s=t=>`${t[1].type}_${t[1].start}_${t[1].text}`;for(let e=0;e<i.length;e+=1){let n=zt(t,i,e),l=s(n);r.set(l,o[e]=Ht(l,n))}return{c(){e=_("div");for(let t=0;t<o.length;t+=1)o[t].c();L(e,"class","effect-group svelte-1gbe0ii")},m(t,r){D(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){1&n&&(i=t[0],st(),o=mt(o,n,s,1,t,i,r,e,pt,Ht,null,zt),lt())},i(t){if(!n){for(let t=0;t<i.length;t+=1)ct(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)at(o[t]);n=!1},d(t){t&&T(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Rt(t,e,n){let{effects:o=[]}=e;return t.$$set=t=>{"effects"in t&&n(0,o=t.effects)},[o]}class Xt extends bt{constructor(t){super(),yt(this,t,Rt,Bt,s,{effects:0})}}function qt(t){let e,n,o,r,i,s,l,c,a,d,u,f=t[0].title+"";return n=new Xt({props:{effects:t[0].effects}}),l=new Ct({props:{health:t[0].health,maxHealth:t[0].maxHealth}}),{c(){e=_("div"),gt(n.$$.fragment),o=S(),r=_("div"),i=O(f),s=S(),gt(l.$$.fragment),c=S(),a=_("div"),L(r,"class","title svelte-14y5r3h"),L(a,"class","sprite svelte-14y5r3h"),L(e,"class",d=p("character side-"+t[1])+" svelte-14y5r3h")},m(t,d){D(t,e,d),ht(n,e,null),w(e,o),w(e,r),w(r,i),w(e,s),ht(l,e,null),w(e,c),w(e,a),u=!0},p(t,[o]){const r={};1&o&&(r.effects=t[0].effects),n.$set(r),(!u||1&o)&&f!==(f=t[0].title+"")&&C(i,f);const s={};1&o&&(s.health=t[0].health),1&o&&(s.maxHealth=t[0].maxHealth),l.$set(s),(!u||2&o&&d!==(d=p("character side-"+t[1])+" svelte-14y5r3h"))&&L(e,"class",d)},i(t){u||(ct(n.$$.fragment,t),ct(l.$$.fragment,t),u=!0)},o(t){at(n.$$.fragment,t),at(l.$$.fragment,t),u=!1},d(t){t&&T(e),$t(n),$t(l)}}}function Yt(t,e,n){let{character:o}=e,{side:r}=e;return t.$$set=t=>{"character"in t&&n(0,o=t.character),"side"in t&&n(1,r=t.side)},[o,r]}class Vt extends bt{constructor(t){super(),yt(this,t,Yt,qt,s,{character:0,side:1})}}function Zt(t){let e,n;return e=new Vt({props:{character:t[1],side:"right"}}),{c(){gt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.character=t[1]),e.$set(o)},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){at(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function Ut(t){let e,n,o,r;n=new Vt({props:{character:t[0],side:"left"}});let i=t[1]&&Zt(t);return{c(){e=_("div"),gt(n.$$.fragment),o=S(),i&&i.c(),L(e,"class","viewscreen svelte-1w8k5qv")},m(t,s){D(t,e,s),ht(n,e,null),w(e,o),i&&i.m(e,null),r=!0},p(t,[o]){const r={};1&o&&(r.character=t[0]),n.$set(r),t[1]?i?(i.p(t,o),2&o&&ct(i,1)):(i=Zt(t),i.c(),ct(i,1),i.m(e,null)):i&&(st(),at(i,1,1,(()=>{i=null})),lt())},i(t){r||(ct(n.$$.fragment,t),ct(i),r=!0)},o(t){at(n.$$.fragment,t),at(i),r=!1},d(t){t&&T(e),$t(n),i&&i.d()}}}function Gt(t,e,n){let o,r;return l(t,xt,(t=>n(0,o=t))),l(t,Tt,(t=>n(1,r=t))),[o,r]}class Jt extends bt{constructor(t){super(),yt(this,t,Gt,Ut,s,{})}}function Kt(e){let n;return{c(){n=_("div"),L(n,"class","orb-slot svelte-1mjc8gs")},m(t,e){D(t,n,e)},p:t,d(t){t&&T(n)}}}function Qt(t){let e,n,o;return{c(){e=_("div"),n=O(t[0]),L(e,"class","orb-slot svelte-1mjc8gs"),L(e,"title",o=Ot[t[0]].title),M(e,"--orb-color",Ot[t[0]].color)},m(t,o){D(t,e,o),w(e,n)},p(t,r){1&r&&C(n,t[0]),1&r&&o!==(o=Ot[t[0]].title)&&L(e,"title",o),1&r&&M(e,"--orb-color",Ot[t[0]].color)},d(t){t&&T(e)}}}function te(e){let n;function o(t,e){return t[0]?Qt:Kt}let r=o(e),i=r(e);return{c(){i.c(),n=k()},m(t,e){i.m(t,e),D(t,n,e)},p(t,[e]){r===(r=o(t))&&i?i.p(t,e):(i.d(1),i=r(t),i&&(i.c(),i.m(n.parentNode,n)))},i:t,o:t,d(t){i.d(t),t&&T(n)}}}function ee(t,e,n){let{orb:o}=e;return t.$$set=t=>{"orb"in t&&n(0,o=t.orb)},[o]}class ne extends bt{constructor(t){super(),yt(this,t,ee,te,s,{orb:0})}}function oe(t,e,n){const o=t.slice();return o[1]=e[n],o[3]=n,o}function re(t){let e,n;return e=new ne({props:{orb:t[0][t[3]]||null}}),{c(){gt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.orb=t[0][t[3]]||null),e.$set(o)},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){at(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function ie(t){let e,n,o=Array(7),r=[];for(let e=0;e<o.length;e+=1)r[e]=re(oe(t,o,e));const i=t=>at(r[t],1,1,(()=>{r[t]=null}));return{c(){e=_("div");for(let t=0;t<r.length;t+=1)r[t].c();L(e,"class","orb-bar svelte-13yxhd8")},m(t,o){D(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){if(1&n){let s;for(o=Array(7),s=0;s<o.length;s+=1){const i=oe(t,o,s);r[s]?(r[s].p(i,n),ct(r[s],1)):(r[s]=re(i),r[s].c(),ct(r[s],1),r[s].m(e,null))}for(st(),s=o.length;s<r.length;s+=1)i(s);lt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)ct(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)at(r[t]);n=!1},d(t){t&&T(e),A(r,t)}}}function se(t,e,n){let o;return l(t,Dt,(t=>n(0,o=t))),[o]}class le extends bt{constructor(t){super(),yt(this,t,se,ie,s,{})}}function ce(t,e,n){t.dispatchEvent(new CustomEvent("finalize",{detail:{items:e,info:n}}))}function ae(t,e,n){t.dispatchEvent(new CustomEvent("consider",{detail:{items:e,info:n}}))}const de="draggedEntered",ue="draggedLeft",fe="draggedOverIndex",pe="draggedLeftDocument",me="leftForAnother",ge="outsideOfAny";function he(t,e,n){t.dispatchEvent(new CustomEvent(de,{detail:{indexObj:e,draggedEl:n}}))}function $e(t,e,n){t.dispatchEvent(new CustomEvent(ue,{detail:{draggedEl:e,type:me,theOtherDz:n}}))}function ye(t,e,n){t.dispatchEvent(new CustomEvent(fe,{detail:{indexObj:e,draggedEl:n}}))}const be="dragStarted",ve=de,we="dragEnteredAnother",xe=fe,Ee=ue,De="draggedLeftAll",Te="droppedIntoZone",Ae="droppedIntoAnother",_e="droppedOutsideOfAny",Oe="dragStopped",Se="pointer",ke="keyboard",Ie="isDndShadowItem",Le="data-is-dnd-shadow-item",Ce="id:dnd-shadow-placeholder-0000";let Me="id",Pe=0;function We(){Pe++}function Fe(){if(0===Pe)throw new Error("Bug! trying to decrement when there are no dropzones");Pe--}const Ne="undefined"==typeof window;function je(t){let e;const n=t.getBoundingClientRect(),o=getComputedStyle(t),r=o.transform;if(r){let i,s,l,c;if(r.startsWith("matrix3d("))e=r.slice(9,-1).split(/, /),i=+e[0],s=+e[5],l=+e[12],c=+e[13];else{if(!r.startsWith("matrix("))return n;e=r.slice(7,-1).split(/, /),i=+e[0],s=+e[3],l=+e[4],c=+e[5]}const a=o.transformOrigin,d=n.x-l-(1-i)*parseFloat(a),u=n.y-c-(1-s)*parseFloat(a.slice(a.indexOf(" ")+1)),f=i?n.width/i:t.offsetWidth,p=s?n.height/s:t.offsetHeight;return{x:d,y:u,width:f,height:p,top:u,right:d+f,bottom:u+p,left:d}}return n}function ze(t){const e=je(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function He(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function Be(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function Re(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function Xe(t){return Be(He(t))}function qe(t,e){return Re(Xe(t),ze(e))}function Ye(t,e){const n=Xe(t),o=Xe(e);return r=n,i=o,Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2));var r,i}let Ve;function Ze(){Ve=new Map}function Ue(t,e){if(!qe(t,e))return null;const n=e.children;if(0===n.length)return{index:0,isProximityBased:!0};const o=function(t){const e=Array.from(t.children).findIndex((t=>t.getAttribute(Le)));if(e>=0)return Ve.has(t)||Ve.set(t,new Map),Ve.get(t).set(e,ze(t.children[e])),e}(e);for(let r=0;r<n.length;r++)if(qe(t,n[r])){const n=Ve.has(e)&&Ve.get(e).get(r);return n&&!Re(Xe(t),n)?{index:o,isProximityBased:!1}:{index:r,isProximityBased:!1}}let r,i=Number.MAX_VALUE;for(let e=0;e<n.length;e++){const o=Ye(t,n[e]);o<i&&(i=o,r=e)}return{index:r,isProximityBased:!0}}Ze();function Ge(){let t;function e(){t={directionObj:void 0,stepPx:0}}function n(e){const{directionObj:o,stepPx:r}=t;o&&(e.scrollBy(o.x*r,o.y*r),window.requestAnimationFrame((()=>n(e))))}function o(t){return 25-t}return e(),{scrollIfNeeded:function(r,i){if(!i)return!1;const s=function(t,e){const n=He(e);return Re(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}(r,i);if(null===s)return e(),!1;const l=!!t.directionObj;let[c,a]=[!1,!1];return i.scrollHeight>i.clientHeight&&(s.bottom<25?(c=!0,t.directionObj={x:0,y:1},t.stepPx=o(s.bottom)):s.top<25&&(c=!0,t.directionObj={x:0,y:-1},t.stepPx=o(s.top)),!l&&c)||i.scrollWidth>i.clientWidth&&(s.right<25?(a=!0,t.directionObj={x:1,y:0},t.stepPx=o(s.right)):s.left<25&&(a=!0,t.directionObj={x:-1,y:0},t.stepPx=o(s.left)),!l&&a)?(n(i),!0):(e(),!1)},resetScrolling:e}}function Je(t){return JSON.stringify(t,null,2)}function Ke(t){if(!t)throw new Error("cannot get depth of a falsy node");return Qe(t,0)}function Qe(t,e=0){return t.parentElement?Qe(t.parentElement,e+1):e-1}const{scrollIfNeeded:tn,resetScrolling:en}=Ge();let nn;function on(t,e,n=200){let o,r,i,s=!1;const l=Array.from(e).sort(((t,e)=>Ke(e)-Ke(t)));!function e(){const c=Xe(t);if(!tn(c,o)&&i&&Math.abs(i.x-c.x)<10&&Math.abs(i.y-c.y)<10)return void(nn=window.setTimeout(e,n));if(function(t){const e=He(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}(t))return void function(t){window.dispatchEvent(new CustomEvent(pe,{detail:{draggedEl:t}}))}(t);i=c;let a=!1;for(const e of l){const n=Ue(t,e);if(null===n)continue;const{index:i}=n;a=!0,e!==o?(o&&$e(o,t,e),he(e,n,t),o=e):i!==r&&(ye(e,n,t),r=i);break}!a&&s&&o?(!function(t,e){t.dispatchEvent(new CustomEvent(ue,{detail:{draggedEl:e,type:ge}}))}(o,t),o=void 0,r=void 0,s=!1):s=!0,nn=window.setTimeout(e,n)}()}let rn;function sn(t){const e=t.touches?t.touches[0]:t;rn={x:e.clientX,y:e.clientY}}const{scrollIfNeeded:ln,resetScrolling:cn}=Ge();let an;function dn(){rn&&ln(rn,document.documentElement),an=window.setTimeout(dn,300)}function un(t){return`${t} 0.2s ease`}function fn(t,e,n,o,r){const i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),l=i.width-s.width,c=i.height-s.height;if(l||c){const e={left:(n-s.left)/s.width,top:(o-s.top)/s.height};t.style.height=`${i.height}px`,t.style.width=`${i.width}px`,t.style.left=parseFloat(t.style.left)-e.left*l+"px",t.style.top=parseFloat(t.style.top)-e.top*c+"px"}pn(e,t),r()}function pn(t,e){const n=window.getComputedStyle(t);Array.from(n).filter((t=>t.startsWith("background")||t.startsWith("padding")||t.startsWith("font")||t.startsWith("text")||t.startsWith("align")||t.startsWith("justify")||t.startsWith("display")||t.startsWith("flex")||t.startsWith("border")||"opacity"===t||"color"===t||"list-style-type"===t)).forEach((t=>e.style.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))))}function mn(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function gn(t,e=(()=>{}),n=(()=>[])){t.forEach((t=>{const o=e(t);Object.keys(o).forEach((e=>{t.style[e]=o[e]})),n(t).forEach((e=>t.classList.add(e)))}))}function hn(t,e=(()=>{}),n=(()=>[])){t.forEach((t=>{const o=e(t);Object.keys(o).forEach((e=>{t.style[e]=""})),n(t).forEach((e=>t.classList.contains(e)&&t.classList.remove(e)))}))}const $n={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let yn,bn,vn,wn,xn,En,Dn,Tn,An,_n,On,Sn=!1,kn=!1,In=!1;const Ln=new Map,Cn=new Map,Mn=new WeakMap;function Pn(t,e){Ln.get(e).delete(t),Fe(),0===Ln.get(e).size&&Ln.delete(e)}function Wn(){window.addEventListener("mousemove",sn),window.addEventListener("touchmove",sn),dn();const t=Ln.get(wn);for(const e of t)e.addEventListener(de,jn),e.addEventListener(ue,zn),e.addEventListener(fe,Hn);window.addEventListener(pe,Rn);const e=Math.max(100,...Array.from(t.keys()).map((t=>Cn.get(t).dropAnimationDurationMs)));on(bn,t,1.07*e)}function Fn(){window.removeEventListener("mousemove",sn),window.removeEventListener("touchmove",sn),rn=void 0,window.clearTimeout(an),cn();const t=Ln.get(wn);for(const e of t)e.removeEventListener(de,jn),e.removeEventListener(ue,zn),e.removeEventListener(fe,Hn);window.removeEventListener(pe,Rn),clearTimeout(nn),en(),Ze()}function Nn(t){return t.findIndex((t=>!!t.isDndShadowItem&&t.id!==Ce))}function jn(t){let{items:e,dropFromOthersDisabled:n}=Cn.get(t.currentTarget);if(n&&t.currentTarget!==xn)return;if(In=!1,e=e.filter((t=>t.id!==Dn.id)),xn!==t.currentTarget){const t=Cn.get(xn).items.filter((t=>!t.isDndShadowItem));ae(xn,t,{trigger:we,id:vn.id,source:Se})}else{const t=function(t){return t.findIndex((t=>t.id===Ce))}(e);-1!==t&&e.splice(t,1)}const{index:o,isProximityBased:r}=t.detail.indexObj,i=r&&o===t.currentTarget.children.length-1?o+1:o;Tn=t.currentTarget,e.splice(i,0,Dn),ae(t.currentTarget,e,{trigger:ve,id:vn.id,source:Se})}function zn(t){if(!Sn)return;const{items:e,dropFromOthersDisabled:n}=Cn.get(t.currentTarget);if(n&&t.currentTarget!==xn&&t.currentTarget!==Tn)return;const o=Nn(e),r=e.splice(o,1)[0];Tn=void 0;const{type:i,theOtherDz:s}=t.detail;if(i===ge||i===me&&s!==xn&&Cn.get(s).dropFromOthersDisabled){In=!0,Tn=xn;const t=Cn.get(xn).items;t.splice(En,0,r),ae(xn,t,{trigger:De,id:vn.id,source:Se})}ae(t.currentTarget,e,{trigger:Ee,id:vn.id,source:Se})}function Hn(t){const{items:e,dropFromOthersDisabled:n}=Cn.get(t.currentTarget);if(n&&t.currentTarget!==xn)return;In=!1;const{index:o}=t.detail.indexObj,r=Nn(e);e.splice(r,1),e.splice(o,0,Dn),ae(t.currentTarget,e,{trigger:xe,id:vn.id,source:Se})}function Bn(t){t.preventDefault();const e=t.touches?t.touches[0]:t;_n={x:e.clientX,y:e.clientY},bn.style.transform=`translate3d(${_n.x-An.x}px, ${_n.y-An.y}px, 0)`}function Rn(){kn=!0,window.removeEventListener("mousemove",Bn),window.removeEventListener("touchmove",Bn),window.removeEventListener("mouseup",Rn),window.removeEventListener("touchend",Rn),Fn(),function(t){t.style.cursor="grab"}(bn),Tn||(Tn=xn);let{items:t,type:e}=Cn.get(Tn);hn(Ln.get(e),(t=>Cn.get(t).dropTargetStyle),(t=>Cn.get(t).dropTargetClasses));let n=Nn(t);-1===n&&(n=En),t=t.map((t=>t.isDndShadowItem?vn:t)),function(t,e){const n=je(Tn.children[t]),o={x:n.left-parseFloat(bn.style.left),y:n.top-parseFloat(bn.style.top)},{dropAnimationDurationMs:r}=Cn.get(Tn),i=`transform ${r}ms ease`;bn.style.transition=bn.style.transition?bn.style.transition+","+i:i,bn.style.transform=`translate3d(${o.x}px, ${o.y}px, 0)`,window.setTimeout(e,r)}(n,(function(){var e;On(),ce(Tn,t,{trigger:In?_e:Te,id:vn.id,source:Se}),Tn!==xn&&ce(xn,Cn.get(xn).items,{trigger:Ae,id:vn.id,source:Se}),(e=Tn.children[n]).style.visibility="",e.removeAttribute(Le),bn.remove(),yn.remove(),bn=void 0,yn=void 0,vn=void 0,wn=void 0,xn=void 0,En=void 0,Dn=void 0,Tn=void 0,An=void 0,_n=void 0,Sn=!1,kn=!1,On=void 0,In=!1}))}function Xn(t,e){const n={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:$n,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let o=new Map;function r(){window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i)}function i(){r(),yn=void 0,An=void 0,_n=void 0}function s(t){t.preventDefault();const e=t.touches?t.touches[0]:t;_n={x:e.clientX,y:e.clientY},(Math.abs(_n.x-An.x)>=3||Math.abs(_n.y-An.y)>=3)&&(r(),function(){Sn=!0;const t=o.get(yn);En=t,xn=yn.parentElement;const e=xn.getRootNode(),r=e.body||e,{items:i,type:s,centreDraggedOnCursor:l}=n;vn={...i[t]},wn=s,Dn={...vn,[Ie]:!0};const c={...Dn,[Me]:Ce};function a(){var t;bn.parentElement?window.requestAnimationFrame(a):(r.appendChild(bn),bn.focus(),Wn(),(t=yn).style.display="none",t.style.position="fixed",t.style.zIndex="-5",r.appendChild(yn))}bn=function(t,e){const n=t.getBoundingClientRect(),o=t.cloneNode(!0);pn(t,o),o.id="dnd-action-dragged-el",o.style.position="fixed";let r=n.top,i=n.left;if(o.style.top=`${r}px`,o.style.left=`${i}px`,e){const t=Be(n);r-=t.y-e.y,i-=t.x-e.x,window.setTimeout((()=>{o.style.top=`${r}px`,o.style.left=`${i}px`}),0)}return o.style.margin="0",o.style.boxSizing="border-box",o.style.height=`${n.height}px`,o.style.width=`${n.width}px`,o.style.transition=`${un("top")}, ${un("left")}, ${un("background-color")}, ${un("opacity")}, ${un("color")} `,window.setTimeout((()=>o.style.transition+=`, ${un("width")}, ${un("height")}`),0),o.style.zIndex="9999",o.style.cursor="grabbing",o}(yn,l&&_n),window.requestAnimationFrame(a),gn(Array.from(Ln.get(n.type)).filter((t=>t===xn||!Cn.get(t).dropFromOthersDisabled)),(t=>Cn.get(t).dropTargetStyle),(t=>Cn.get(t).dropTargetClasses)),i.splice(t,1,c),On=function(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}(xn),ae(xn,i,{trigger:be,id:vn.id,source:Se}),window.addEventListener("mousemove",Bn,{passive:!1}),window.addEventListener("touchmove",Bn,{passive:!1,capture:!1}),window.addEventListener("mouseup",Rn,{passive:!1}),window.addEventListener("touchend",Rn,{passive:!1})}())}function l(t){if(t.target!==t.currentTarget&&(void 0!==t.target.value||t.target.isContentEditable))return;if(t.button)return;if(Sn)return;t.stopPropagation();const e=t.touches?t.touches[0]:t;An={x:e.clientX,y:e.clientY},_n={...An},yn=t.currentTarget,window.addEventListener("mousemove",s,{passive:!1}),window.addEventListener("touchmove",s,{passive:!1,capture:!1}),window.addEventListener("mouseup",i,{passive:!1}),window.addEventListener("touchend",i,{passive:!1})}function c({items:e,flipDurationMs:r=0,type:i="--any--",dragDisabled:s=!1,morphDisabled:c=!1,dropFromOthersDisabled:a=!1,dropTargetStyle:d=$n,dropTargetClasses:u=[],transformDraggedElement:f=(()=>{}),centreDraggedOnCursor:p=!1}){var m,g;function h(t,e){return Cn.get(t)?Cn.get(t)[e]:n[e]}n.dropAnimationDurationMs=r,n.type&&i!==n.type&&Pn(t,n.type),n.type=i,m=t,g=i,Ln.has(g)||Ln.set(g,new Set),Ln.get(g).has(m)||(Ln.get(g).add(m),We()),n.items=[...e],n.dragDisabled=s,n.morphDisabled=c,n.transformDraggedElement=f,n.centreDraggedOnCursor=p,!Sn||kn||function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}(d,n.dropTargetStyle)&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(u,n.dropTargetClasses)||(hn([t],(()=>n.dropTargetStyle),(()=>u)),gn([t],(()=>d),(()=>u))),n.dropTargetStyle=d,n.dropTargetClasses=[...u],Sn&&n.dropFromOthersDisabled!==a&&(a?hn([t],(t=>h(t,"dropTargetStyle")),(t=>h(t,"dropTargetClasses"))):gn([t],(t=>h(t,"dropTargetStyle")),(t=>h(t,"dropTargetClasses")))),n.dropFromOthersDisabled=a,Cn.set(t,n);const $=Nn(n.items);for(let e=0;e<t.children.length;e++){const r=t.children[e];mn(r,s),e!==$?(r.removeEventListener("mousedown",Mn.get(r)),r.removeEventListener("touchstart",Mn.get(r)),s||(r.addEventListener("mousedown",l),r.addEventListener("touchstart",l),Mn.set(r,l)),o.set(r,e)):(c||fn(bn,r,_n.x,_n.y,(()=>n.transformDraggedElement(bn,vn,e))),(y=r).style.visibility="hidden",y.setAttribute(Le,"true"))}var y}return c(e),{update:t=>{c(t)},destroy:()=>{Pn(t,n.type),Cn.delete(t)}}}const qn={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Yn={[qn.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[qn.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"};let Vn;function Zn(){Vn=document.createElement("div"),Vn.id="dnd-action-aria-alert",Vn.style.position="fixed",Vn.style.bottom="0",Vn.style.left="0",Vn.style.zIndex="-5",Vn.style.opacity="0",Vn.style.height="0",Vn.style.width="0",Vn.setAttribute("role","alert"),document.body.prepend(Vn),Object.entries(Yn).forEach((([t,e])=>document.body.prepend(function(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}(t,e))))}function Un(t){Vn.innerHTML="";const e=document.createTextNode(t);Vn.appendChild(e),Vn.style.display="none",Vn.style.display="inline"}const Gn={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let Jn,Kn,Qn,to,eo=!1,no="",oo="";const ro=new WeakSet,io=new WeakMap,so=new WeakMap,lo=new Map,co=new Map,ao=new Map,uo=Ne?null:("complete"===document.readyState?Zn():window.addEventListener("DOMContentLoaded",Zn),{...qn});function fo(t,e){Kn===t&&$o(),ao.get(e).delete(t),Fe(),0===ao.get(e).size&&ao.delete(e),0===ao.size&&(window.removeEventListener("keydown",po),window.removeEventListener("click",mo))}function po(t){if(eo&&"Escape"===t.key)$o()}function mo(){eo&&(ro.has(document.activeElement)||$o())}function go(t){if(!eo)return;const e=t.currentTarget;if(e===Kn)return;no=e.getAttribute("aria-label")||"";const{items:n}=co.get(Kn),o=n.find((t=>t.id===to)),r=n.indexOf(o),i=n.splice(r,1)[0],{items:s,autoAriaDisabled:l}=co.get(e);e.getBoundingClientRect().top<Kn.getBoundingClientRect().top||e.getBoundingClientRect().left<Kn.getBoundingClientRect().left?(s.push(i),l||Un(`Moved item ${oo} to the end of the list ${no}`)):(s.unshift(i),l||Un(`Moved item ${oo} to the beginning of the list ${no}`));ce(Kn,n,{trigger:Ae,id:to,source:ke}),ce(e,s,{trigger:Te,id:to,source:ke}),Kn=e}function ho(){lo.forEach((({update:t},e)=>t(co.get(e))))}function $o(t=!0){co.get(Kn).autoAriaDisabled||Un(`Stopped dragging item ${oo}`),ro.has(document.activeElement)&&document.activeElement.blur(),t&&ae(Kn,co.get(Kn).items,{trigger:Oe,id:to,source:ke}),hn(ao.get(Jn),(t=>co.get(t).dropTargetStyle),(t=>co.get(t).dropTargetClasses)),Qn=null,to=null,oo="",Jn=null,Kn=null,no="",eo=!1,ho()}function yo(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Gn,dropTargetClasses:[],autoAriaDisabled:!1};function o(t,e,n){t.length<=1||t.splice(n,1,t.splice(e,1,t[n])[0])}function r(e){switch(e.key){case"Enter":case" ":if((void 0!==e.target.disabled||e.target.href||e.target.isContentEditable)&&!ro.has(e.target))return;e.preventDefault(),e.stopPropagation(),eo?$o():i(e);break;case"ArrowDown":case"ArrowRight":{if(!eo)return;e.preventDefault(),e.stopPropagation();const{items:r}=co.get(t),i=Array.from(t.children),s=i.indexOf(e.currentTarget);s<i.length-1&&(n.autoAriaDisabled||Un(`Moved item ${oo} to position ${s+2} in the list ${no}`),o(r,s,s+1),ce(t,r,{trigger:Te,id:to,source:ke}));break}case"ArrowUp":case"ArrowLeft":{if(!eo)return;e.preventDefault(),e.stopPropagation();const{items:r}=co.get(t),i=Array.from(t.children).indexOf(e.currentTarget);i>0&&(n.autoAriaDisabled||Un(`Moved item ${oo} to position ${i} in the list ${no}`),o(r,i,i-1),ce(t,r,{trigger:Te,id:to,source:ke}));break}}}function i(e){!function(e){const{items:n}=co.get(t),o=Array.from(t.children),r=o.indexOf(e);Qn=e,Qn.tabIndex=0,to=n[r].id,oo=o[r].getAttribute("aria-label")||""}(e.currentTarget),Kn=t,Jn=n.type,eo=!0;const o=Array.from(ao.get(n.type)).filter((t=>t===Kn||!co.get(t).dropFromOthersDisabled));if(gn(o,(t=>co.get(t).dropTargetStyle),(t=>co.get(t).dropTargetClasses)),!n.autoAriaDisabled){let t=`Started dragging item ${oo}. Use the arrow keys to move it within its list ${no}`;o.length>1&&(t+=", or tab to another list in order to move the item into it"),Un(t)}ae(t,co.get(t).items,{trigger:be,id:to,source:ke}),ho()}function s(t){eo&&t.currentTarget!==Qn&&(t.stopPropagation(),$o(!1),i(t))}function l({items:e=[],type:o="--any--",dragDisabled:i=!1,zoneTabIndex:l=0,dropFromOthersDisabled:c=!1,dropTargetStyle:a=Gn,dropTargetClasses:d=[],autoAriaDisabled:u=!1}){var f,p;n.items=[...e],n.dragDisabled=i,n.dropFromOthersDisabled=c,n.zoneTabIndex=l,n.dropTargetStyle=a,n.dropTargetClasses=d,n.autoAriaDisabled=u,u||(t.setAttribute("aria-disabled",i),t.setAttribute("role","list"),t.setAttribute("aria-describedby",i?uo.DND_ZONE_DRAG_DISABLED:uo.DND_ZONE_ACTIVE)),n.type&&o!==n.type&&fo(t,n.type),n.type=o,f=t,p=o,0===ao.size&&(window.addEventListener("keydown",po),window.addEventListener("click",mo)),ao.has(p)||ao.set(p,new Set),ao.get(p).has(f)||(ao.get(p).add(f),We()),co.set(t,n),t.tabIndex=eo?t===Kn||Qn.contains(t)||n.dropFromOthersDisabled||Kn&&n.type!==co.get(Kn).type?-1:0:n.zoneTabIndex,t.addEventListener("focus",go);for(let e=0;e<t.children.length;e++){const o=t.children[e];ro.add(o),o.tabIndex=eo?-1:0,u||o.setAttribute("role","listitem"),o.removeEventListener("keydown",io.get(o)),o.removeEventListener("click",so.get(o)),i||(o.addEventListener("keydown",r),io.set(o,r),o.addEventListener("click",s),so.set(o,s)),eo&&n.items[e].id===to&&(Qn=o,Qn.tabIndex=0,o.focus())}}l(e);const c={update:t=>{l(t)},destroy:()=>{fo(t,n.type),co.delete(t),lo.delete(t)}};return lo.set(t,c),c}function bo(t,e){vo(e);const n=Xn(t,e),o=yo(t,e);return{update:t=>{vo(t),n.update(t),o.update(t)},destroy:()=>{n.destroy(),o.destroy()}}}function vo(t){const{items:e,flipDurationMs:n,type:o,dragDisabled:r,morphDisabled:i,dropFromOthersDisabled:s,zoneTabIndex:l,dropTargetStyle:c,dropTargetClasses:a,transformDraggedElement:d,autoAriaDisabled:u,centreDraggedOnCursor:f,...p}=t;if(Object.keys(p).length>0&&console.warn("dndzone will ignore unknown options",p),!e)throw new Error("no 'items' key provided to dndzone");const m=e.find((t=>!{}.hasOwnProperty.call(t,Me)));if(m)throw new Error(`missing 'id' property for item ${Je(m)}`);if(a&&!Array.isArray(a))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof a}, ${Je(a)}`);if(l&&(g=l,isNaN(g)||(0|(h=parseFloat(g)))!==h))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof l}, ${Je(l)}`);var g,h}function wo(e){let n;return{c(){n=_("div"),L(n,"class","ability-tile svelte-fwh5s7")},m(t,e){D(t,n,e)},p:t,d(t){t&&T(n)}}}function xo(e){let n;return{c(){n=_("div"),n.textContent="Nothing!",L(n,"class","expanded ability-tile svelte-fwh5s7")},m(t,e){D(t,n,e)},p:t,d(t){t&&T(n)}}}function Eo(t){let e,n,o,r,i,s=t[0].icon+"";return{c(){e=_("div"),n=O(s),o=S(),r=_("div"),L(r,"class","progress-bar svelte-fwh5s7"),L(e,"class","ability-tile icon svelte-fwh5s7"),L(e,"title",i=`${t[0].name}: ${t[0].damage} damage`),M(e,"--completion-percent",t[4]+"%"),P(e,"active",t[0].active)},m(t,i){D(t,e,i),w(e,n),w(e,o),w(e,r)},p(t,o){1&o&&s!==(s=t[0].icon+"")&&C(n,s),1&o&&i!==(i=`${t[0].name}: ${t[0].damage} damage`)&&L(e,"title",i),16&o&&M(e,"--completion-percent",t[4]+"%"),1&o&&P(e,"active",t[0].active)},d(t){t&&T(e)}}}function Do(t){let e,n,o,r,i,s,l,c,a,d,u,f,p,m=t[0].name+"",g=t[0].speed+"",h=t[0].damage>0&&To(t),$=t[0].heal>0&&Ao(t),y=t[0].cost&&_o(t),b=t[0].orbs&&Oo(t);return{c(){e=_("div"),n=_("b"),o=O(m),r=S(),i=_("br"),s=O("\r\n\t\tðŸ’¨: "),l=O(g),c=S(),h&&h.c(),a=S(),$&&$.c(),d=S(),y&&y.c(),u=S(),b&&b.c(),f=S(),p=_("div"),L(p,"class","progress-bar svelte-fwh5s7"),L(e,"class","expanded ability-tile svelte-fwh5s7"),M(e,"--completion-percent",t[4]+"%"),P(e,"active",t[3]),P(e,"dragging",t[2])},m(t,m){D(t,e,m),w(e,n),w(n,o),w(e,r),w(e,i),w(e,s),w(e,l),w(e,c),h&&h.m(e,null),w(e,a),$&&$.m(e,null),w(e,d),y&&y.m(e,null),w(e,u),b&&b.m(e,null),w(e,f),w(e,p)},p(t,n){1&n&&m!==(m=t[0].name+"")&&C(o,m),1&n&&g!==(g=t[0].speed+"")&&C(l,g),t[0].damage>0?h?h.p(t,n):(h=To(t),h.c(),h.m(e,a)):h&&(h.d(1),h=null),t[0].heal>0?$?$.p(t,n):($=Ao(t),$.c(),$.m(e,d)):$&&($.d(1),$=null),t[0].cost?y?y.p(t,n):(y=_o(t),y.c(),y.m(e,u)):y&&(y.d(1),y=null),t[0].orbs?b?b.p(t,n):(b=Oo(t),b.c(),b.m(e,f)):b&&(b.d(1),b=null),16&n&&M(e,"--completion-percent",t[4]+"%"),8&n&&P(e,"active",t[3]),4&n&&P(e,"dragging",t[2])},d(t){t&&T(e),h&&h.d(),$&&$.d(),y&&y.d(),b&&b.d()}}}function To(t){let e,n,o=t[0].damage+"";return{c(){e=O("âš”: "),n=O(o)},m(t,o){D(t,e,o),D(t,n,o)},p(t,e){1&e&&o!==(o=t[0].damage+"")&&C(n,o)},d(t){t&&T(e),t&&T(n)}}}function Ao(t){let e,n,o=t[0].heal+"";return{c(){e=O("ðŸ’š: "),n=O(o)},m(t,o){D(t,e,o),D(t,n,o)},p(t,e){1&e&&o!==(o=t[0].heal+"")&&C(n,o)},d(t){t&&T(e),t&&T(n)}}}function _o(t){let e,n,o,r=Object.entries(t[0].cost).map(t[5]).join("")+"";return{c(){e=_("br"),n=O("\r\n\t\t\tâž–: "),o=O(r)},m(t,r){D(t,e,r),D(t,n,r),D(t,o,r)},p(t,e){1&e&&r!==(r=Object.entries(t[0].cost).map(t[5]).join("")+"")&&C(o,r)},d(t){t&&T(e),t&&T(n),t&&T(o)}}}function Oo(t){let e,n,o,r=t[0].orbs.map(t[6]).join("")+"";return{c(){e=_("br"),n=O("\r\n\t\t\tâž•: "),o=O(r)},m(t,r){D(t,e,r),D(t,n,r),D(t,o,r)},p(t,e){1&e&&r!==(r=t[0].orbs.map(t[6]).join("")+"")&&C(o,r)},d(t){t&&T(e),t&&T(n),t&&T(o)}}}function So(e){let n;function o(t,e){return t[0]&&t[1]?Do:t[0]?Eo:t[1]?xo:wo}let r=o(e),i=r(e);return{c(){i.c(),n=k()},m(t,e){i.m(t,e),D(t,n,e)},p(t,[e]){r===(r=o(t))&&i?i.p(t,e):(i.d(1),i=r(t),i&&(i.c(),i.m(n.parentNode,n)))},i:t,o:t,d(t){i.d(t),t&&T(n)}}}function ko(t,e,n){let{ability:o=null,expanded:r=!1}=e,{dragging:i=!1}=e,{active:s=!1}=e,{completion:l=0}=e;return t.$$set=t=>{"ability"in t&&n(0,o=t.ability),"expanded"in t&&n(1,r=t.expanded),"dragging"in t&&n(2,i=t.dragging),"active"in t&&n(3,s=t.active),"completion"in t&&n(4,l=t.completion)},[o,r,i,s,l,([t,e])=>Ot[t].icon.repeat(e),t=>Ot[t].icon]}class Io extends bt{constructor(t){super(),yt(this,t,ko,So,s,{ability:0,expanded:1,dragging:2,active:3,completion:4})}}function Lo(t,e,n){const o=t.slice();return o[12]=e[n],o[14]=n,o}function Co(e){let n;return{c(){n=_("div")},m(t,e){D(t,n,e)},p:t,i:t,o:t,d(t){t&&T(n)}}}function Mo(t){let e,n;return e=new Io({props:{active:t[1],ability:t[2],expanded:t[0],completion:t[4]}}),{c(){gt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.active=t[1]),4&n&&(o.ability=t[2]),1&n&&(o.expanded=t[0]),16&n&&(o.completion=t[4]),e.$set(o)},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){at(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function Po(t,e){let n,o,r,i,s;const l=[Mo,Co],c=[];function a(t,e){return 0===t[14]?0:1}return o=a(e),r=c[o]=l[o](e),{key:t,first:null,c(){n=k(),r.c(),i=k(),this.first=n},m(t,e){D(t,n,e),c[o].m(t,e),D(t,i,e),s=!0},p(t,n){let s=o;o=a(e=t),o===s?c[o].p(e,n):(st(),at(c[s],1,1,(()=>{c[s]=null})),lt(),r=c[o],r?r.p(e,n):(r=c[o]=l[o](e),r.c()),ct(r,1),r.m(i.parentNode,i))},i(t){s||(ct(r),s=!0)},o(t){at(r),s=!1},d(t){t&&T(n),c[o].d(t),t&&T(i)}}}function Wo(t){let e,n,o,s,l,c=[],a=new Map,d=t[3];const u=t=>t[12].id;for(let e=0;e<d.length;e+=1){let n=Lo(t,d,e),o=u(n);a.set(o,c[e]=Po(o,n))}return{c(){e=_("div");for(let t=0;t<c.length;t+=1)c[t].c()},m(r,i){D(r,e,i);for(let t=0;t<c.length;t+=1)c[t].m(e,null);o=!0,s||(l=[g(n=bo.call(null,e,{items:t[3],morphDisabled:!0})),I(e,"finalize",t[6]),I(e,"consider",t[5])],s=!0)},p(t,[o]){31&o&&(d=t[3],st(),c=mt(c,o,u,1,t,d,a,e,pt,Po,null,Lo),lt()),n&&i(n.update)&&8&o&&n.update.call(null,{items:t[3],morphDisabled:!0})},i(t){if(!o){for(let t=0;t<d.length;t+=1)ct(c[t]);o=!0}},o(t){for(let t=0;t<c.length;t+=1)at(c[t]);o=!1},d(t){t&&T(e);for(let t=0;t<c.length;t+=1)c[t].d();s=!1,r(l)}}}function Fo(t,e,n){let o,r,i,s,c;l(t,Et,(t=>n(11,s=t))),l(t,xt,(t=>n(10,c=t)));let{slot:a,expanded:d,active:u}=e,f=_t[s[a]],p=[{id:0,...f}];return t.$$set=t=>{"slot"in t&&n(7,a=t.slot),"expanded"in t&&n(0,d=t.expanded),"active"in t&&n(1,u=t.active)},t.$$.update=()=>{4&t.$$.dirty&&n(8,o=1e3*f.speed),1026&t.$$.dirty&&n(9,r=u?c.abilityWindup:0),768&t.$$.dirty&&n(4,i=r/o*100)},[d,u,f,p,i,function(t){0==t.detail.items.length&&(t.detail.items=[_t[0]]),n(3,p=t.detail.items)},function(t){t.detail.items=t.detail.items.filter((t=>!t.isDndShadowItem)),n(3,p=[t.detail.items[0]]),m(Et,s[a]=p[0].id,s),Et.set(s),n(2,f=_t[p[0].id])},a,o,r,c]}class No extends bt{constructor(t){super(),yt(this,t,Fo,Wo,s,{slot:7,expanded:0,active:1})}}function jo(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function zo(t){let e;return{c(){e=_("span"),e.textContent="+",L(e,"class","svelte-1p77nsc")},m(t,n){D(t,e,n)},d(t){t&&T(e)}}}function Ho(t){let e;return{c(){e=_("span"),e.textContent="âˆ’",L(e,"class","svelte-1p77nsc")},m(t,n){D(t,e,n)},d(t){t&&T(e)}}}function Bo(t){let e,n;return e=new No({props:{active:t[0]==t[5],slot:t[5],expanded:t[1]}}),{c(){gt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.active=t[0]==t[5]),2&n&&(o.expanded=t[1]),e.$set(o)},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){at(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function Ro(t){let e,n,o,r,i,s;function l(t,e){return t[1]?Ho:zo}let c=l(t),a=c(t),d=Array(5),u=[];for(let e=0;e<d.length;e+=1)u[e]=Bo(jo(t,d,e));const f=t=>at(u[t],1,1,(()=>{u[t]=null}));return{c(){e=_("div"),n=_("div"),a.c(),o=S();for(let t=0;t<u.length;t+=1)u[t].c();L(n,"class","expand-icon svelte-1p77nsc"),L(e,"class","ability-bar svelte-1p77nsc")},m(l,c){D(l,e,c),w(e,n),a.m(n,null),w(e,o);for(let t=0;t<u.length;t+=1)u[t].m(e,null);r=!0,i||(s=I(n,"click",t[2]),i=!0)},p(t,[o]){if(c!==(c=l(t))&&(a.d(1),a=c(t),a&&(a.c(),a.m(n,null))),3&o){let n;for(d=Array(5),n=0;n<d.length;n+=1){const r=jo(t,d,n);u[n]?(u[n].p(r,o),ct(u[n],1)):(u[n]=Bo(r),u[n].c(),ct(u[n],1),u[n].m(e,null))}for(st(),n=d.length;n<u.length;n+=1)f(n);lt()}},i(t){if(!r){for(let t=0;t<d.length;t+=1)ct(u[t]);r=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)at(u[t]);r=!1},d(t){t&&T(e),a.d(),A(u,t),i=!1,s()}}}function Xo(t,e,n){let o=!0,{activeIndex:r=0}=e;return t.$$set=t=>{"activeIndex"in t&&n(0,r=t.activeIndex)},[r,o,()=>n(1,o=!o)]}class qo extends bt{constructor(t){super(),yt(this,t,Xo,Ro,s,{activeIndex:0})}}let Yo=1;function Vo(){return"svelte-tabs-"+Yo++}function Zo(t){let e,n,o,r;const i=t[4].default,s=c(i,t,t[3],null);return{c(){e=_("div"),s&&s.c(),L(e,"class","svelte-tabs")},m(i,l){D(i,e,l),s&&s.m(e,null),n=!0,o||(r=I(e,"keydown",t[1]),o=!0)},p(t,[e]){s&&s.p&&(!n||8&e)&&u(s,i,t,t[3],n?d(i,t[3],e,null):f(t[3]),null)},i(t){n||(ct(s,t),n=!0)},o(t){at(s,t),n=!1},d(t){t&&T(e),s&&s.d(t),o=!1,r()}}}const Uo={};function Go(t,e,n){let o,{$$slots:r={},$$scope:i}=e,{initialSelectedIndex:s=0}=e;const c=[],a=[],d=[],u=wt({}),f=wt({}),p=wt(null);l(t,p,(t=>n(5,o=t)));const m=wt(null);function g(t,e,n){var o;t.push(e),n.update((t=>t||e)),o=()=>function(t,e,n){const o=t.indexOf(e);t.splice(o,1),n.update((n=>n===e?t[o]||t[t.length-1]:n))}(t,e,n),H().$$.on_destroy.push(o)}function h(t){const e=a.indexOf(t);p.set(t),m.set(d[e])}var $,y,b;return $=Uo,y={registerTab(t){g(a,t,p)},registerTabElement(t){c.push(t)},registerPanel(t){g(d,t,m)},selectTab:h,selectedTab:p,selectedPanel:m,controls:u,labeledBy:f},H().$$.context.set($,y),B((()=>{h(a[s])})),b=()=>{for(let t=0;t<a.length;t++)u.update((e=>({...e,[a[t].id]:d[t].id}))),f.update((e=>({...e,[d[t].id]:a[t].id})))},H().$$.after_update.push(b),t.$$set=t=>{"initialSelectedIndex"in t&&n(2,s=t.initialSelectedIndex),"$$scope"in t&&n(3,i=t.$$scope)},[p,async function(t){if(t.target.classList.contains("svelte-tabs__tab")){let e=a.indexOf(o);switch(t.key){case"ArrowRight":e+=1,e>a.length-1&&(e=0),h(a[e]),c[e].focus();break;case"ArrowLeft":e-=1,e<0&&(e=a.length-1),h(a[e]),c[e].focus()}}},s,i,r]}class Jo extends bt{constructor(t){super(),yt(this,t,Go,Zo,s,{initialSelectedIndex:2})}}function Ko(t){let e,n,o,r,i,s;const l=t[9].default,a=c(l,t,t[8],null);return{c(){e=_("li"),a&&a.c(),L(e,"role","tab"),L(e,"id",t[3].id),L(e,"aria-controls",n=t[2][t[3].id]),L(e,"aria-selected",t[1]),L(e,"tabindex",o=t[1]?0:-1),L(e,"class","svelte-tabs__tab svelte-1fbofsd"),P(e,"svelte-tabs__selected",t[1])},m(n,o){D(n,e,o),a&&a.m(e,null),t[10](e),r=!0,i||(s=I(e,"click",t[11]),i=!0)},p(t,[i]){a&&a.p&&(!r||256&i)&&u(a,l,t,t[8],r?d(l,t[8],i,null):f(t[8]),null),(!r||4&i&&n!==(n=t[2][t[3].id]))&&L(e,"aria-controls",n),(!r||2&i)&&L(e,"aria-selected",t[1]),(!r||2&i&&o!==(o=t[1]?0:-1))&&L(e,"tabindex",o),2&i&&P(e,"svelte-tabs__selected",t[1])},i(t){r||(ct(a,t),r=!0)},o(t){at(a,t),r=!1},d(n){n&&T(e),a&&a.d(n),t[10](null),i=!1,s()}}}function Qo(t,e,n){let o,r,i,{$$slots:s={},$$scope:c}=e;const a={id:Vo()},{registerTab:d,registerTabElement:u,selectTab:f,selectedTab:p,controls:m}=R(Uo);let g;l(t,p,(t=>n(7,o=t))),l(t,m,(t=>n(2,r=t))),d(a),B((async()=>{await(G(),Z),u(i)}));return t.$$set=t=>{"$$scope"in t&&n(8,c=t.$$scope)},t.$$.update=()=>{128&t.$$.dirty&&n(1,g=o===a)},[i,g,r,a,f,p,m,o,c,s,function(t){q[t?"unshift":"push"]((()=>{i=t,n(0,i)}))},()=>f(a)]}class tr extends bt{constructor(t){super(),yt(this,t,Qo,Ko,s,{})}}function er(t){let e,n;const o=t[1].default,r=c(o,t,t[0],null);return{c(){e=_("ul"),r&&r.c(),L(e,"role","tablist"),L(e,"class","svelte-tabs__tab-list svelte-12yby2a")},m(t,o){D(t,e,o),r&&r.m(e,null),n=!0},p(t,[e]){r&&r.p&&(!n||1&e)&&u(r,o,t,t[0],n?d(o,t[0],e,null):f(t[0]),null)},i(t){n||(ct(r,t),n=!0)},o(t){at(r,t),n=!1},d(t){t&&T(e),r&&r.d(t)}}}function nr(t,e,n){let{$$slots:o={},$$scope:r}=e;return t.$$set=t=>{"$$scope"in t&&n(0,r=t.$$scope)},[r,o]}class or extends bt{constructor(t){super(),yt(this,t,nr,er,s,{})}}function rr(t){let e;const n=t[6].default,o=c(n,t,t[5],null);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,r){o&&o.p&&(!e||32&r)&&u(o,n,t,t[5],e?d(n,t[5],r,null):f(t[5]),null)},i(t){e||(ct(o,t),e=!0)},o(t){at(o,t),e=!1},d(t){o&&o.d(t)}}}function ir(t){let e,n,o,r=t[1]===t[2]&&rr(t);return{c(){e=_("div"),r&&r.c(),L(e,"id",t[2].id),L(e,"aria-labelledby",n=t[0][t[2].id]),L(e,"class","svelte-tabs__tab-panel svelte-epfyet"),L(e,"role","tabpanel")},m(t,n){D(t,e,n),r&&r.m(e,null),o=!0},p(t,[i]){t[1]===t[2]?r?(r.p(t,i),2&i&&ct(r,1)):(r=rr(t),r.c(),ct(r,1),r.m(e,null)):r&&(st(),at(r,1,1,(()=>{r=null})),lt()),(!o||1&i&&n!==(n=t[0][t[2].id]))&&L(e,"aria-labelledby",n)},i(t){o||(ct(r),o=!0)},o(t){at(r),o=!1},d(t){t&&T(e),r&&r.d()}}}function sr(t,e,n){let o,r,{$$slots:i={},$$scope:s}=e;const c={id:Vo()},{registerPanel:a,selectedPanel:d,labeledBy:u}=R(Uo);return l(t,d,(t=>n(1,r=t))),l(t,u,(t=>n(0,o=t))),a(c),t.$$set=t=>{"$$scope"in t&&n(5,s=t.$$scope)},[o,r,c,d,u,s,i]}class lr extends bt{constructor(t){super(),yt(this,t,sr,ir,s,{})}}function cr(t,e,n){const o=t.slice();return o[3]=e[n],o}function ar(t,e){let n,o,r;return o=new Io({props:{expanded:!0,ability:e[3],dragging:!!e[3].isDndShadowItem}}),{key:t,first:null,c(){n=k(),gt(o.$$.fragment),this.first=n},m(t,e){D(t,n,e),ht(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.ability=e[3]),1&n&&(r.dragging=!!e[3].isDndShadowItem),o.$set(r)},i(t){r||(ct(o.$$.fragment,t),r=!0)},o(t){at(o.$$.fragment,t),r=!1},d(t){t&&T(n),$t(o,t)}}}function dr(t){let e,n,o,s,l,c,a=[],d=new Map,u=t[0];const f=t=>t[3].id;for(let e=0;e<u.length;e+=1){let n=cr(t,u,e),o=f(n);d.set(o,a[e]=ar(o,n))}return{c(){e=_("div"),n=_("div");for(let t=0;t<a.length;t+=1)a[t].c();L(n,"class","ability-list svelte-118ht3i"),L(e,"class","ability-list-container")},m(r,i){D(r,e,i),w(e,n);for(let t=0;t<a.length;t+=1)a[t].m(n,null);s=!0,l||(c=[g(o=bo.call(null,n,{items:t[0]})),I(n,"consider",t[1]),I(n,"finalize",t[2])],l=!0)},p(t,[e]){1&e&&(u=t[0],st(),a=mt(a,e,f,1,t,u,d,n,pt,ar,null,cr),lt()),o&&i(o.update)&&1&e&&o.update.call(null,{items:t[0]})},i(t){if(!s){for(let t=0;t<u.length;t+=1)ct(a[t]);s=!0}},o(t){for(let t=0;t<a.length;t+=1)at(a[t]);s=!1},d(t){t&&T(e);for(let t=0;t<a.length;t+=1)a[t].d();l=!1,r(c)}}}function ur(t,e,n){let o=Object.values(_t);return[o,function(t){const{trigger:e,id:r}=t.detail.info;if(e===be){const e=o.findIndex((t=>t.id===r)),i=`${r}_copy`;t.detail.items=t.detail.items.filter((t=>!t.isDndShadowItem)),t.detail.items.splice(e,0,{...o[e],id:i}),n(0,o=t.detail.items)}else n(0,o=[...o])},function(t){n(0,o=t.detail.items.map((t=>(t.id="string"==typeof t.id?parseInt(t.id.replace("_copy","")):t.id,t))))}]}class fr extends bt{constructor(t){super(),yt(this,t,ur,dr,s,{})}}function pr(t,e,n){const o=t.slice();return o[15]=e[n],o}function mr(t){let e;return{c(){e=O("Abilities")},m(t,n){D(t,e,n)},d(t){t&&T(e)}}}function gr(t){let e;return{c(){e=O("Travel")},m(t,n){D(t,e,n)},d(t){t&&T(e)}}}function hr(t){let e,n;return e=new tr({props:{$$slots:{default:[$r]},$$scope:{ctx:t}}}),{c(){gt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){at(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function $r(t){let e;return{c(){e=O("Shop")},m(t,n){D(t,e,n)},d(t){t&&T(e)}}}function yr(t){let e,n,o,r,i,s;e=new tr({props:{$$slots:{default:[mr]},$$scope:{ctx:t}}}),o=new tr({props:{$$slots:{default:[gr]},$$scope:{ctx:t}}});let l=0==t[0].location&&hr(t);return{c(){gt(e.$$.fragment),n=S(),gt(o.$$.fragment),r=S(),l&&l.c(),i=k()},m(t,c){ht(e,t,c),D(t,n,c),ht(o,t,c),D(t,r,c),l&&l.m(t,c),D(t,i,c),s=!0},p(t,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const s={};262144&n&&(s.$$scope={dirty:n,ctx:t}),o.$set(s),0==t[0].location?l?1&n&&ct(l,1):(l=hr(t),l.c(),ct(l,1),l.m(i.parentNode,i)):l&&(st(),at(l,1,1,(()=>{l=null})),lt())},i(t){s||(ct(e.$$.fragment,t),ct(o.$$.fragment,t),ct(l),s=!0)},o(t){at(e.$$.fragment,t),at(o.$$.fragment,t),at(l),s=!1},d(t){$t(e,t),t&&T(n),$t(o,t),t&&T(r),l&&l.d(t),t&&T(i)}}}function br(t){let e,n;return e=new fr({}),{c(){gt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){at(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function vr(t,e){let n,o,r,i,s,l,c=e[15].name+"";function a(...t){return e[2](e[15],...t)}return{key:t,first:null,c(){n=_("div"),o=_("button"),r=O(c),i=S(),this.first=n},m(t,e){D(t,n,e),w(n,o),w(o,r),w(n,i),s||(l=I(o,"click",a),s=!0)},p(t,n){e=t},d(t){t&&T(n),s=!1,l()}}}function wr(t){let e,n=[],o=new Map,r=St;const i=t=>t[15].id;for(let e=0;e<r.length;e+=1){let s=pr(t,r,e),l=i(s);o.set(l,n[e]=vr(l,s))}return{c(){e=_("div");for(let t=0;t<n.length;t+=1)n[t].c()},m(t,o){D(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null)},p(t,s){2&s&&(r=St,n=mt(n,s,i,1,t,r,o,e,ft,vr,null,pr))},d(t){t&&T(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function xr(t){let e,n;return e=new lr({props:{$$slots:{default:[Er]},$$scope:{ctx:t}}}),{c(){gt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},i(t){n||(ct(e.$$.fragment,t),n=!0)},o(t){at(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function Er(t){let e;return{c(){e=_("div"),e.textContent="Shop will go here!"},m(t,n){D(t,e,n)},d(t){t&&T(e)}}}function Dr(t){let e,n,o,r,i,s,l,c;e=new or({props:{$$slots:{default:[yr]},$$scope:{ctx:t}}}),o=new lr({props:{$$slots:{default:[br]},$$scope:{ctx:t}}}),i=new lr({props:{$$slots:{default:[wr]},$$scope:{ctx:t}}});let a=0==t[0].location&&xr(t);return{c(){gt(e.$$.fragment),n=S(),gt(o.$$.fragment),r=S(),gt(i.$$.fragment),s=S(),a&&a.c(),l=k()},m(t,d){ht(e,t,d),D(t,n,d),ht(o,t,d),D(t,r,d),ht(i,t,d),D(t,s,d),a&&a.m(t,d),D(t,l,d),c=!0},p(t,n){const r={};262145&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const s={};262144&n&&(s.$$scope={dirty:n,ctx:t}),o.$set(s);const c={};262144&n&&(c.$$scope={dirty:n,ctx:t}),i.$set(c),0==t[0].location?a?1&n&&ct(a,1):(a=xr(t),a.c(),ct(a,1),a.m(l.parentNode,l)):a&&(st(),at(a,1,1,(()=>{a=null})),lt())},i(t){c||(ct(e.$$.fragment,t),ct(o.$$.fragment,t),ct(i.$$.fragment,t),ct(a),c=!0)},o(t){at(e.$$.fragment,t),at(o.$$.fragment,t),at(i.$$.fragment,t),at(a),c=!1},d(t){$t(e,t),t&&T(n),$t(o,t),t&&T(r),$t(i,t),t&&T(s),a&&a.d(t),t&&T(l)}}}function Tr(t){let e,n,o,r,i,s,l,c,a,d,u,f,p,m,g,h,$,y,b,v,x=t[0].gold+"",E=_r(t[0].combo)+"",A=t[0].combo+"",k=1!=t[0].combo?"s":"";return p=new Jt({}),g=new qo({props:{activeIndex:t[0].activeAbilityIndex}}),$=new le({}),b=new Jo({props:{$$slots:{default:[Dr]},$$scope:{ctx:t}}}),{c(){e=_("main"),n=_("div"),o=O("Gold: "),r=O(x),i=O(" | Combo: "),s=O(E),l=O("x ("),c=O(A),a=O(" hit"),d=O(k),u=O(")"),f=S(),gt(p.$$.fragment),m=S(),gt(g.$$.fragment),h=S(),gt($.$$.fragment),y=S(),gt(b.$$.fragment),L(e,"class","app svelte-i6oqpv")},m(t,x){D(t,e,x),w(e,n),w(n,o),w(n,r),w(n,i),w(n,s),w(n,l),w(n,c),w(n,a),w(n,d),w(n,u),w(e,f),ht(p,e,null),w(e,m),ht(g,e,null),w(e,h),ht($,e,null),w(e,y),ht(b,e,null),v=!0},p(t,[e]){(!v||1&e)&&x!==(x=t[0].gold+"")&&C(r,x),(!v||1&e)&&E!==(E=_r(t[0].combo)+"")&&C(s,E),(!v||1&e)&&A!==(A=t[0].combo+"")&&C(c,A),(!v||1&e)&&k!==(k=1!=t[0].combo?"s":"")&&C(d,k);const n={};1&e&&(n.activeIndex=t[0].activeAbilityIndex),g.$set(n);const o={};262145&e&&(o.$$scope={dirty:e,ctx:t}),b.$set(o)},i(t){v||(ct(p.$$.fragment,t),ct(g.$$.fragment,t),ct($.$$.fragment,t),ct(b.$$.fragment,t),v=!0)},o(t){at(p.$$.fragment,t),at(g.$$.fragment,t),at($.$$.fragment,t),at(b.$$.fragment,t),v=!1},d(t){t&&T(e),$t(p),$t(g),$t($),$t(b)}}}function Ar(t,e){if(!t)return!0;const n=e.reduce((function(t,e){return t[e]?++t[e]:t[e]=1,t}),{});return Object.entries(t).every((([t,e])=>n[t]&&n[t]>=e))}function _r(t){return Math.floor((t+1)**.5)}function Or(t,e=1){return e=(new Date).getTime()-e,t.filter((t=>t.start>e))}function Sr(t,e,n){let o,r,i,s;function c(){const t={activeAbilities:s,player:r,savedAt:(new Date).getTime(),version:"0.0.1"};return localStorage.setItem("gameState",JSON.stringify(t)),!0}function a(t){0==t?(m(Tt,i=!1,i),m(xt,r.activeAbilityIndex=0,r),m(xt,r.abilityWindup=0,r),m(xt,r.combo=0,r),m(Dt,o=[],o)):p(kt)}l(t,Dt,(t=>n(3,o=t))),l(t,xt,(t=>n(0,r=t))),l(t,Tt,(t=>n(4,i=t))),l(t,Et,(t=>n(5,s=t))),function(){const t=localStorage.getItem("gameState");if(!t||!t.length)return!1;const e=JSON.parse(t);if(!e)return!1;console.log("Loaded game"),m(Et,s=e.activeAbilities||s,s),m(xt,r=e.player||r,r),a(r.location)}()||(a(0),c()),setInterval((function(){d(),u(),c()}),50);const d=()=>{if(!i)return;const t=_t[s[r.activeAbilityIndex]];if(m(xt,r.effects=Or(r.effects),r),!Ar(t.cost,o))return void f(r.activeAbilityIndex);m(xt,r.abilityWindup+=50,r);const e=1e3*t.speed;if(r.abilityWindup>=e){m(Dt,o=function(t,e){t.cost;const n={...t.cost};return e.filter((t=>!n[t]||(n[t]--,!1)))}(t,o),o);const n=_r(r.combo),s=(t.damage||0)*n,l=(t.heal||0)*n;m(Tt,i.health-=s,i),m(xt,r.health+=l,r),r.health>r.maxHealth&&m(xt,r.health=r.maxHealth,r),m(xt,r.abilityWindup-=e,r),s>0&&m(Tt,i.effects=[...i.effects,{text:`-${s}`,start:(new Date).getTime(),type:"damage"}],i),l>0&&m(xt,r.effects=[...r.effects,{text:`${l}`,start:(new Date).getTime(),type:"heal"}],r),t.name,t.orbs&&m(Dt,o=[...o,...t.orbs],o),0==o.length?m(xt,r.combo=0,r):o.length>r.maxOrbs&&(m(xt,r.effects=[...r.effects,{text:"Combo Reset!",start:(new Date).getTime(),type:"damage"}],r),m(xt,r.combo=0,r),m(Dt,o=o.slice(-1*r.maxOrbs),o)),t.speed>0&&m(xt,r.combo+=1,r),f(r.activeAbilityIndex)}},u=()=>{if(!i)return;if(m(Tt,i.effects=Or(i.effects),i),i.health<=0){const t=Math.floor(Math.random()*(i.maxHealth/10))+1;m(xt,r.gold+=t,r),i.title;const e=i.maxHealth+10;return void p({...i,health:e,maxHealth:e})}m(Tt,i.abilityWindup+=50,i);const t=1e3*i.speed;i.abilityWindup>=t&&(m(Tt,i.abilityWindup-=t,i),m(xt,r.health-=i.damage,r),m(xt,r.effects=[...r.effects,{text:`-${i.damage}`,start:(new Date).getTime(),type:"damage"}],r),i.title,i.damage,r.health<=0&&(m(xt,r.health=r.maxHealth,r),m(xt,r.gold=0,r),a(0)))},f=t=>{let e=s[t+1]?t+1:0;const n=_t[s[e]];if(n.cost&&!Ar(n.cost,o))return n.name,void f(e);m(xt,r.activeAbilityIndex=e,r)};function p(t){m(Tt,i=t,i),m(Tt,i.abilityWindup=0,i),m(xt,r.activeAbilityIndex=0,r),m(xt,r.abilityWindup=0,r),m(xt,r.combo=0,r),m(Dt,o=[],o)}return[r,a,(t,e)=>a(t.id)]}return new class extends bt{constructor(t){super(),yt(this,t,Sr,Tr,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
